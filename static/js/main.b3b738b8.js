(()=>{"use strict";var e={45908:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ja});var r={};n.r(r),n.d(r,{bg:()=>wr,en:()=>jr});var a=n(15861),i=n(29439),o=n(44697),l=n(81133),s=n(32222),u=n(89526),c=n(14094),d=n(63665),f=n(79650),p=n(97169),h=n(95899),m=n(67394),g=n(57321),y=n.n(g),b=n(67557);const x=function(e){var t=e.thumbnailSize,n=void 0===t?80:t,r=e.lessonTitle,a=void 0===r?"":r,i=e.lessonThumbnail,o=e.onContinuePress,l={borderColor:(0,f.useTheme)().colors.surface};return(0,b.jsxs)(p.default,{style:v.surface,elevation:1,children:[i&&(0,b.jsx)(p.default,{style:[v.thumbnail,l],children:(0,b.jsx)(d.default,{size:n,source:i})}),(0,b.jsx)(h.default,{variant:"headlineSmall",style:v.headline,children:a}),(0,b.jsx)(h.default,{variant:"titleMedium",style:v.subheading,children:y().t("home:Pick up where you left off")}),(0,b.jsx)(m.default,{mode:"contained",style:v.buttonContainer,contentStyle:v.button,onPress:o,children:y().t("home:Continue")})]})};var v=c.default.create({surface:{marginVertical:20,borderRadius:16,justifyContent:"center",alignItems:"center",paddingHorizontal:20},thumbnail:{borderRadius:100,borderWidth:6,marginTop:-30,marginBottom:5},headline:{textAlign:"center",fontSize:20,lineHeight:25},subheading:{textAlign:"center",marginBottom:10},buttonContainer:{marginBottom:18},button:{paddingHorizontal:10}}),j=n(92727),w=n(84357);const S=n.p+"static/media/no_image.98a6e781ccda6ef91543.jpg";var O=n(58363);n(91410),n(98323),n(74208);0===O.default.apps.length?O.default.initializeApp({apiKey:"AIzaSyCseh9VwXNt07eHSVEpiyNsJDWw1b2aD8A",authDomain:"festifybg.firebaseapp.com",projectId:"festifybg",storageBucket:"festifybg.appspot.com",messagingSenderId:"939551607694",appId:"1:939551607694:web:870238ee26486d2a3b72df"}):O.default.app();var C=O.default.auth(),P=O.default.firestore(),k=O.default.storage(),T=n(4942);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())},E=function(){var e=(0,a.default)((function*(e){var t=yield P.collection("users").doc(e).get();if(!t.exists)return null;var n=t.data().current_lesson,r=yield P.collection("seasons_timeline").doc(n.season).get();return r.exists?z(z({},r.data().holidays[n.index]),n):null}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=(0,a.default)((function*(e,t){var n=yield P.collection("users").doc(e).get();if(n.exists){var r=n.data().xp;return P.collection("users").doc(e).update({last_reward_claim:L().valueOf(),xp:r+t})}}));return function(t,n){return e.apply(this,arguments)}}(),I=n(88521),B=n(79424),H=n(42640);const V=function(e){var t=e.onRewardClaim,n=e.rewardAmount,r=void 0===n?0:n,a=(0,u.useRef)(new I.default.Value(0)).current,i=(0,f.useTheme)().colors;(0,u.useEffect)((function(){I.default.spring(a,{toValue:1,useNativeDriver:!0}).start()}),[]);return(0,b.jsx)(B.default,{borderless:!0,centered:!0,style:U.ripple,onPress:function(){t(),I.default.timing(a,{toValue:0,duration:300,delay:1500,useNativeDriver:!0}).start()},children:(0,b.jsx)(I.default.View,{style:{transform:[{scale:a}]},children:(0,b.jsxs)(p.default,{style:U.surface,elevation:2,children:[r>0?(0,b.jsxs)(h.default,{style:[U.reward,{color:i.xp}],children:[r," XP"]}):(0,b.jsx)(H.default,{name:"star",size:60,color:i.xp}),(0,b.jsx)(h.default,{style:U.text,children:y().t("home:Daily Reward")})]})})})};var U=c.default.create({surface:{paddingVertical:20,paddingHorizontal:20,borderRadius:16,justifyContent:"center",alignItems:"center"},text:{fontSize:20,paddingVertical:8},ripple:{borderRadius:16},reward:{fontSize:26,paddingVertical:10,fontWeight:"bold"}}),A=s.default.create({container:{padding:40,flex:1,"@media only screen and (min-width: 640px)":{width:"50%",alignSelf:"center"}},activityIndicator:{flex:1}}),M=A.styles,N=A.ids;const _=function(){var e=(0,u.useState)(null),t=(0,i.default)(e,2),n=t[0],r=t[1],o=(0,u.useState)(!1),s=(0,i.default)(o,2),c=s[0],d=s[1],f=(0,u.useState)(0),p=(0,i.default)(f,2),h=p[0],m=p[1],g=(0,j.useNavigation)(),y=function(){var e=(0,a.default)((function*(){try{var e=yield E(C.currentUser.uid);r(e)}catch(t){console.error(t)}}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.default)((function*(){m(0);try{(yield(e=C.currentUser.uid,P.collection("users").doc(e).get().then((function(e){if(!e.exists)return!1;var t=e.data().last_reward_claim,n=new Date(t),r=L();return n.getTime()<r.getTime()}))))&&d(!0)}catch(t){console.error(t)}var e}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,a.default)((function*(){try{var e=10+10*Math.round(9*Math.random());R(C.currentUser.uid,e),m(e),setTimeout((function(){d(!1)}),2e3)}catch(t){console.error(t)}}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,a.default)((function*(){yield y(),yield v()}));return function(){return e.apply(this,arguments)}}();(0,j.useFocusEffect)((0,u.useCallback)((function(){k()}),[C.currentUser]));return(0,b.jsx)(l.default,{style:M.container,dataSet:{media:N.container},children:n?(0,b.jsxs)(l.default,{children:[(0,b.jsx)(x,{lessonTitle:n.name,lessonThumbnail:n.thumbnail?{uri:n.thumbnail}:S,onContinuePress:function(){var e=n.season,t=e.capitalize()+" Timeline",r={forSeason:e,title:e.capitalize()+" holidays",appBarTitle:t};g.navigate("LessonsStack",{screen:"Season Timeline",initial:!1,params:r})}}),c&&(0,b.jsx)(V,{onRewardClaim:O,rewardAmount:h})]}):(0,b.jsx)(w.default,{style:M.activityIndicator,size:"large"})})};var W=n(99566);const q=function(){return(0,b.jsx)(l.default,{children:(0,b.jsx)(h.default,{style:F.title,children:y().t("leaderboard:Current leaderboard")})})};var F=c.default.create({title:{fontSize:28,fontWeight:"bold"}}),G=n(74691),X=c.default.create({avatar:{elevation:2,borderRadius:100}});const J=function(e){var t=e.username,n=void 0===t?"":t,r=e.image,a=e.size,i=void 0===a?60:a,o=e.borderWidth,s=void 0===o?4:o,u=e.style,c=void 0===u?null:u,p=(0,f.useTheme)().colors;return(0,b.jsx)(l.default,{children:r?(0,b.jsx)(l.default,{style:[{borderColor:p.surface,borderWidth:s},X.avatar,c],children:(0,b.jsx)(d.default,{size:i,source:{uri:r}})}):(0,b.jsx)(l.default,{style:[{borderColor:p.surface,borderWidth:s},X.avatar,c],children:(0,b.jsx)(G.default,{size:i,label:n.substring(0,2).toUpperCase()})})})};var Q=n(65738);const Y=function(e){var t=e.avatar,n=e.username,r=void 0===n?"":n,a=e.xp,i=void 0===a?0:a,o=e.place,s=void 0===o?0:o,u=(0,f.useTheme)().colors,c=[u.gold,u.silver,u.bronze];return(0,b.jsx)(p.default,{style:K.surfaceContainer,elevation:1,children:(0,b.jsxs)(l.default,{style:K.content,children:[(0,b.jsx)(J,{size:50,username:r,image:t,style:[{borderColor:u.surface},K.styledAvatar]}),(0,b.jsxs)(l.default,{style:K.contentText,children:[(0,b.jsx)(h.default,{style:K.username,children:r}),(0,b.jsxs)(h.default,{style:K.xp,children:[i," XP"]})]}),(0,b.jsxs)(l.default,{style:K.contentPlace,children:[s&&s<4?(0,b.jsx)(Q.default,{name:"ribbon",size:24,color:c[s-1]}):null,s?(0,b.jsx)(h.default,{style:K.placeText,children:s}):null]})]})})};var K=c.default.create({surfaceContainer:{paddingHorizontal:20,paddingVertical:8,borderRadius:14,margin:5},content:{flexDirection:"row"},contentText:{justifyContent:"center",paddingHorizontal:20},username:{fontSize:20},xp:{fontSize:14},contentPlace:{flexDirection:"row",flex:1,alignItems:"center",justifyContent:"flex-end"},placeText:{fontSize:20,fontWeight:"600",paddingHorizontal:5}}),Z=n(46337),$=n(53307);const ee=function(e){var t,n=e.delay,r=void 0===n?0:n,a=e.direction,i=void 0===a?"left":a,o=e.children,l=Z.default.get("window"),s=l.width,u=l.height,c={left:-s,right:s,top:-u,bottom:u},d=null!=(t=c[i])?t:c.left,f=(0,$.useSpring)({position:d,delay:r,from:{position:d},to:{position:0},config:{mass:1,tension:100,friction:15}}),p="top"===i||"bottom"===i?"translateY":"translateX",h={transform:[(0,T.default)({},p,f.position)]};return(0,b.jsx)($.animated.View,{style:h,children:o})};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const re=function(){var e=(0,u.useState)(null),t=(0,i.default)(e,2),n=t[0],r=t[1],o=(0,u.useState)([]),s=(0,i.default)(o,2),c=s[0],d=s[1],f=function(){var e=(0,a.default)((function*(e){try{var t=ne({},e);t.place=yield(n=t.xp,P.collection("users").where("xp",">=",n).get().then((function(e){return e.docs.reduce((function(e){return e+1}),0)}))),r(t)}catch(a){console.error(a)}var n}));return function(t){return e.apply(this,arguments)}}();return(0,j.useFocusEffect)((0,u.useCallback)((function(){var e,t,n,a=(e=C.currentUser.uid,t=f,n=console.error,P.collection("users").doc(e).onSnapshot((function(e){var n=e.data(),r=n.xp,a=n.username,i=n.avatar;t({xp:r,username:a,avatar:i})}),(function(e){n(e)}))),i=function(e,t){return P.collection("users").orderBy("xp","desc").limit(100).onSnapshot((function(t){var n=[],r=0;t.forEach((function(e){var t=e.data(),a=t.xp,i=t.username,o=t.avatar;n.push({xp:a,username:i,avatar:o,place:r+1}),r++})),e(n)}),(function(e){t(e)}))}(d,console.error);return function(){a(),i(),r(null),d(null)}}),[])),(0,b.jsx)(l.default,{style:ie.container,dataSet:{media:oe.container},children:(0,b.jsx)(W.default,{data:c,keyExtractor:function(e){return e.place},renderItem:function(e){var t=e.item,n=e.index;return(0,b.jsx)(ee,{delay:200*n,direction:"right",children:(0,b.jsx)(Y,ne({},t))})},ListHeaderComponent:function(){return(0,b.jsxs)(l.default,{children:[(0,b.jsx)(q,{}),n?(0,b.jsx)(l.default,{style:ie.meCard,children:(0,b.jsx)(ee,{children:(0,b.jsx)(Y,ne(ne({},n),{},{username:y().t("leaderboard:Me")}))})}):null]})},contentContainerStyle:ie.topUsersContainer,showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1})})};var ae=s.default.create({container:{flex:1,paddingHorizontal:15,"@media only screen and (min-width: 640px)":{width:"60%",alignSelf:"center"}},meCard:{marginVertical:30},activityIndicator:{flex:1},topUsersContainer:{paddingVertical:20}}),ie=ae.styles,oe=ae.ids,le=n(28053),se=n(42940),ue=n(38631);const ce=c.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"}}),de=JSON.parse('{"red":{"50":"#ffebee","100":"#ffcdd2","200":"#ef9a9a","300":"#e57373","400":"#ef5350","500":"#f44336","600":"#e53935","700":"#d32f2f","800":"#c62828","900":"#b71c1c","a100":"#ff8a80","a200":"#ff5252","a400":"#ff1744","a700":"#d50000"},"pink":{"50":"#fce4ec","100":"#f8bbd0","200":"#f48fb1","300":"#f06292","400":"#ec407a","500":"#e91e63","600":"#d81b60","700":"#c2185b","800":"#ad1457","900":"#880e4f","a100":"#ff80ab","a200":"#ff4081","a400":"#f50057","a700":"#c51162"},"purple":{"50":"#f3e5f5","100":"#e1bee7","200":"#ce93d8","300":"#ba68c8","400":"#ab47bc","500":"#9c27b0","600":"#8e24aa","700":"#7b1fa2","800":"#6a1b9a","900":"#4a148c","a100":"#ea80fc","a200":"#e040fb","a400":"#d500f9","a700":"#aa00ff"},"deeppurple":{"50":"#ede7f6","100":"#d1c4e9","200":"#b39ddb","300":"#9575cd","400":"#7e57c2","500":"#673ab7","600":"#5e35b1","700":"#512da8","800":"#4527a0","900":"#311b92","a100":"#b388ff","a200":"#7c4dff","a400":"#651fff","a700":"#6200ea"},"indigo":{"50":"#e8eaf6","100":"#c5cae9","200":"#9fa8da","300":"#7986cb","400":"#5c6bc0","500":"#3f51b5","600":"#3949ab","700":"#303f9f","800":"#283593","900":"#1a237e","a100":"#8c9eff","a200":"#536dfe","a400":"#3d5afe","a700":"#304ffe"},"blue":{"50":"#e3f2fd","100":"#bbdefb","200":"#90caf9","300":"#64b5f6","400":"#42a5f5","500":"#2196f3","600":"#1e88e5","700":"#1976d2","800":"#1565c0","900":"#0d47a1","a100":"#82b1ff","a200":"#448aff","a400":"#2979ff","a700":"#2962ff"},"lightblue":{"50":"#e1f5fe","100":"#b3e5fc","200":"#81d4fa","300":"#4fc3f7","400":"#29b6f6","500":"#03a9f4","600":"#039be5","700":"#0288d1","800":"#0277bd","900":"#01579b","a100":"#80d8ff","a200":"#40c4ff","a400":"#00b0ff","a700":"#0091ea"},"cyan":{"50":"#e0f7fa","100":"#b2ebf2","200":"#80deea","300":"#4dd0e1","400":"#26c6da","500":"#00bcd4","600":"#00acc1","700":"#0097a7","800":"#00838f","900":"#006064","a100":"#84ffff","a200":"#18ffff","a400":"#00e5ff","a700":"#00b8d4"},"teal":{"50":"#e0f2f1","100":"#b2dfdb","200":"#80cbc4","300":"#4db6ac","400":"#26a69a","500":"#009688","600":"#00897b","700":"#00796b","800":"#00695c","900":"#004d40","a100":"#a7ffeb","a200":"#64ffda","a400":"#1de9b6","a700":"#00bfa5"},"green":{"50":"#e8f5e9","100":"#c8e6c9","200":"#a5d6a7","300":"#81c784","400":"#66bb6a","500":"#4caf50","600":"#43a047","700":"#388e3c","800":"#2e7d32","900":"#1b5e20","a100":"#b9f6ca","a200":"#69f0ae","a400":"#00e676","a700":"#00c853"},"lightgreen":{"50":"#f1f8e9","100":"#dcedc8","200":"#c5e1a5","300":"#aed581","400":"#9ccc65","500":"#8bc34a","600":"#7cb342","700":"#689f38","800":"#558b2f","900":"#33691e","a100":"#ccff90","a200":"#b2ff59","a400":"#76ff03","a700":"#64dd17"},"lime":{"50":"#f9fbe7","100":"#f0f4c3","200":"#e6ee9c","300":"#dce775","400":"#d4e157","500":"#cddc39","600":"#c0ca33","700":"#afb42b","800":"#9e9d24","900":"#827717","a100":"#f4ff81","a200":"#eeff41","a400":"#c6ff00","a700":"#aeea00"},"yellow":{"50":"#fffde7","100":"#fff9c4","200":"#fff59d","300":"#fff176","400":"#ffee58","500":"#ffeb3b","600":"#fdd835","700":"#fbc02d","800":"#f9a825","900":"#f57f17","a100":"#ffff8d","a200":"#ffff00","a400":"#ffea00","a700":"#ffd600"},"amber":{"50":"#fff8e1","100":"#ffecb3","200":"#ffe082","300":"#ffd54f","400":"#ffca28","500":"#ffc107","600":"#ffb300","700":"#ffa000","800":"#ff8f00","900":"#ff6f00","a100":"#ffe57f","a200":"#ffd740","a400":"#ffc400","a700":"#ffab00"},"orange":{"50":"#fff3e0","100":"#ffe0b2","200":"#ffcc80","300":"#ffb74d","400":"#ffa726","500":"#ff9800","600":"#fb8c00","700":"#f57c00","800":"#ef6c00","900":"#e65100","a100":"#ffd180","a200":"#ffab40","a400":"#ff9100","a700":"#ff6d00"},"deeporange":{"50":"#fbe9e7","100":"#ffccbc","200":"#ffab91","300":"#ff8a65","400":"#ff7043","500":"#ff5722","600":"#f4511e","700":"#e64a19","800":"#d84315","900":"#bf360c","a100":"#ff9e80","a200":"#ff6e40","a400":"#ff3d00","a700":"#dd2c00"},"brown":{"50":"#efebe9","100":"#d7ccc8","200":"#bcaaa4","300":"#a1887f","400":"#8d6e63","500":"#795548","600":"#6d4c41","700":"#5d4037","800":"#4e342e","900":"#3e2723"},"grey":{"50":"#fafafa","100":"#f5f5f5","200":"#eeeeee","300":"#e0e0e0","400":"#bdbdbd","500":"#9e9e9e","600":"#757575","700":"#616161","800":"#424242","850":"#343434","900":"#212121"},"bluegrey":{"50":"#eceff1","100":"#cfd8dc","200":"#b0bec5","300":"#90a4ae","400":"#78909c","500":"#607d8b","600":"#546e7a","700":"#455a64","800":"#37474f","900":"#263238"},"white":"#ffffff","black":"#000000"}');var fe={primary:de.teal[600],accent:de.red[700],danger:de.red.a700,success:de.green[600],info:de.lightblue[400],logo:de.red.a700,auth:de.teal[400],xp:de.amber[800],textDisabled:de.grey[500],gold:de.yellow[800],silver:de.bluegrey[400],bronze:de.deeporange[900]},pe={onSurfaceInput:{light:de.grey[100],dark:de.grey[850]},surfaceInput:{light:de.grey[50],dark:de.grey[850]},surfacePicker:{light:de.grey[50],dark:de.grey[850]},surfaceCard:{light:de.grey[50],dark:de.grey[850]}},he={divider:{dark:de.grey[800],light:de.grey[200]}};const me=n.p+"static/media/logo.21f24d25c2cc150d9e14.png";const ge=function(){var e=(0,u.useState)(!1),t=(0,i.default)(e,2),n=t[0],r=t[1];return(0,u.useEffect)((function(){return C.onAuthStateChanged((function(e){r(Boolean(e))}))}),[]),n};var ye=n(7132),be=n(44445),xe=n(68749),ve=n(23637),je=n(27967),we=n(67154),Se=n(7459);function Oe(){return(Oe=(0,a.default)((function*(){var e;if("android"===ye.default.OS&&(yield ve.default("default",{name:"default",importance:je.AndroidImportance.MAX,vibrationPattern:[0,250,250,250]})),be.isDevice){var t=(yield we.getPermissionsAsync()).status,n=t;if("granted"!==t)n=(yield we.requestPermissionsAsync()).status;if("granted"!==n)return void alert("Failed to get push token for push notification!");e=(yield Se.default()).data,console.log(e)}else alert("Must use physical device for Push Notifications");return e}))).apply(this,arguments)}xe.setNotificationHandler({handleNotification:function(){var e=(0,a.default)((function*(){return{shouldShowAlert:!0,shouldPlaySound:!0,shouldSetBadge:!1}}));return function(){return e.apply(this,arguments)}}()});var Ce=function(){var e=(0,a.default)((function*(e){var t=e.username,n=e.email,r=e.password,a=yield function(){return Oe.apply(this,arguments)}(),i={username:t,unlocked_seasons:["spring"],unlocked_lessons:{spring:[0],summer:[0],autumn:[0],winter:[0]},completed_lessons:{spring:[],summer:[],autumn:[],winter:[]},current_lesson:{season:"spring",index:0},collected_rewards:[],last_reward_claim:0,xp:0,notification_token:a},o=(yield C.createUserWithEmailAndPassword(n,r)).user.uid;return P.collection("users").doc(o).set(i)}));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=(0,a.default)((function*(e){var t=e.email,n=e.password,r=(yield C.signInWithEmailAndPassword(t,n)).user;if(!(yield P.collection("users").doc(r.uid).get()).exists)throw new Error("User not found");return r}));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=(0,a.default)((function*(e){return!(yield P.collection("users").where("username","==",e).get()).empty}));return function(t){return e.apply(this,arguments)}}(),Te=n(66274),De=n(99359),ze=n(43144),Le=n(15671),Ee=(0,ze.default)((function e(t,n,r){(0,Le.default)(this,e),this.username=t,this.email=n,this.password=r})),Re=(0,De.default)("username"),Ie=(0,De.default)("email"),Be=(0,De.default)("password"),He=function(){function e(){(0,Le.default)(this,e),Object.defineProperty(this,Re,{writable:!0,value:null}),Object.defineProperty(this,Ie,{writable:!0,value:null}),Object.defineProperty(this,Be,{writable:!0,value:null})}return(0,ze.default)(e,[{key:"username",value:function(e){return(0,Te.default)(this,Re)[Re]=e,this}},{key:"email",value:function(e){return(0,Te.default)(this,Ie)[Ie]=e,this}},{key:"password",value:function(e){return(0,Te.default)(this,Be)[Be]=e,this}},{key:"build",value:function(){return new Ee((0,Te.default)(this,Re)[Re],(0,Te.default)(this,Ie)[Ie],(0,Te.default)(this,Be)[Be])}}]),e}(),Ve=n(46825),Ue=n(66532),Ae=n(45987),Me=n(43497),Ne=n(41739),_e=n(62698),We=n(17823),qe=n(14847),Fe=n(60630);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je=(0,f.adaptNavigationTheme)({reactNavigationLight:qe.default,reactNavigationDark:Fe.default}),Qe=Je.LightTheme,Ye=Je.DarkTheme,Ke={fontFamily:ye.default.select({web:'Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif',ios:"System",default:"sans-serif"})},Ze=Xe(Xe(Xe({},Qe),Ne.MD3LightTheme),{},{fonts:(0,_e.default)(Ke),roundness:6,version:3,colors:Xe(Xe(Xe(Xe(Xe({},Qe.colors),Ne.MD3LightTheme.colors),fe),{primary:"rgb(0, 106, 106)",onPrimary:"rgb(255, 255, 255)",primaryContainer:"rgb(111, 247, 246)",onPrimaryContainer:"rgb(0, 32, 32)",secondary:"rgb(74, 99, 99)",onSecondary:"rgb(255, 255, 255)",secondaryContainer:"rgb(204, 232, 231)",onSecondaryContainer:"rgb(5, 31, 31)",tertiary:"rgb(75, 96, 124)",onTertiary:"rgb(255, 255, 255)",tertiaryContainer:"rgb(211, 228, 255)",onTertiaryContainer:"rgb(4, 28, 53)",error:"rgb(186, 26, 26)",onError:"rgb(255, 255, 255)",errorContainer:"rgb(255, 218, 214)",onErrorContainer:"rgb(65, 0, 2)",background:"rgb(250, 253, 252)",onBackground:"rgb(25, 28, 28)",surface:"rgb(250, 253, 252)",onSurface:"rgb(25, 28, 28)",surfaceVariant:"rgb(218, 229, 228)",onSurfaceVariant:"rgb(63, 73, 72)",outline:"rgb(111, 121, 121)",outlineVariant:"rgb(190, 201, 200)",shadow:"rgb(0, 0, 0)",scrim:"rgb(0, 0, 0)",inverseSurface:"rgb(45, 49, 49)",inverseOnSurface:"rgb(239, 241, 240)",inversePrimary:"rgb(76, 218, 218)",elevation:{level0:"transparent",level1:"rgb(238, 246, 245)",level2:"rgb(230, 241, 240)",level3:"rgb(223, 237, 236)",level4:"rgb(220, 235, 235)",level5:"rgb(215, 232, 232)"},surfaceDisabled:"rgba(25, 28, 28, 0.12)",onSurfaceDisabled:"rgba(25, 28, 28, 0.38)",backdrop:"rgba(41, 50, 50, 0.4)"}),{},{onSurfaceInput:pe.onSurfaceInput.light,surfaceInput:pe.surfaceInput.light,surfacePicker:pe.surfacePicker.light,surfaceCard:pe.surfaceCard.light,textReverse:We.MD3DarkTheme.colors.text,divider:he.divider.light})}),$e=Xe(Xe(Xe({},We.MD3DarkTheme),Ye),{},{fonts:(0,_e.default)({config:Ke}),roundness:6,version:3,colors:Xe(Xe(Xe(Xe(Xe({},We.MD3DarkTheme.colors),Ye.colors),fe),{primary:"rgb(76, 218, 218)",onPrimary:"rgb(0, 55, 55)",primaryContainer:"rgb(0, 79, 79)",onPrimaryContainer:"rgb(111, 247, 246)",secondary:"rgb(176, 204, 203)",onSecondary:"rgb(27, 53, 52)",secondaryContainer:"rgb(50, 75, 75)",onSecondaryContainer:"rgb(204, 232, 231)",tertiary:"rgb(179, 200, 232)",onTertiary:"rgb(28, 49, 75)",tertiaryContainer:"rgb(51, 72, 99)",onTertiaryContainer:"rgb(211, 228, 255)",error:"rgb(255, 180, 171)",onError:"rgb(105, 0, 5)",errorContainer:"rgb(147, 0, 10)",onErrorContainer:"rgb(255, 180, 171)",background:"rgb(25, 28, 28)",onBackground:"rgb(224, 227, 226)",surface:"rgb(25, 28, 28)",onSurface:"rgb(224, 227, 226)",surfaceVariant:"rgb(63, 73, 72)",onSurfaceVariant:"rgb(190, 201, 200)",outline:"rgb(136, 147, 146)",outlineVariant:"rgb(63, 73, 72)",shadow:"rgb(0, 0, 0)",scrim:"rgb(0, 0, 0)",inverseSurface:"rgb(224, 227, 226)",inverseOnSurface:"rgb(45, 49, 49)",inversePrimary:"rgb(0, 106, 106)",elevation:{level0:"transparent",level1:"rgb(28, 38, 38)",level2:"rgb(29, 43, 43)",level3:"rgb(31, 49, 49)",level4:"rgb(31, 51, 51)",level5:"rgb(32, 55, 55)"},surfaceDisabled:"rgba(224, 227, 226, 0.12)",onSurfaceDisabled:"rgba(224, 227, 226, 0.38)",backdrop:"rgba(41, 50, 50, 0.4)"}),{},{onSurfaceInput:pe.onSurfaceInput.dark,surfaceInput:pe.surfaceInput.dark,surfacePicker:pe.surfacePicker.dark,surfaceCard:pe.surfaceCard.dark,textReverse:Ne.MD3LightTheme.colors.text,divider:he.divider.dark})}),et=n(45519),tt=(0,u.createContext)();function nt(){return(0,u.useContext)(tt)}function rt(e){var t=e.children,n=(0,u.useState)(!1),r=(0,i.default)(n,2),o=r[0],l=r[1],s=(0,u.useState)(Ze),c=(0,i.default)(s,2),d=c[0],f=c[1];(0,u.useEffect)((function(){f(o?$e:Ze)}),[o]);var p=(0,u.useRef)(!0);(0,u.useEffect)((function(){p.current?(p.current=!1,m()):g()}),[d]);var h=function(e){switch(e){case"default":default:l(!1);break;case"dark":l(!0)}},m=function(){var e=(0,a.default)((function*(){try{var e=yield et.default.getItem("theme");null!==e&&h(e)}catch(t){console.error(t)}}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,a.default)((function*(){try{yield et.default.setItem("theme",o?"dark":"default")}catch(e){console.error(e)}}));return function(){return e.apply(this,arguments)}}(),y={darkMode:o,currentTheme:d,changeTheme:h,toggleTheme:function(){l(!o)}};return(0,b.jsx)(tt.Provider,{value:y,children:t})}var at=["error","helperText","helperTextStyles","style","disabled"];function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}"ios"===ye.default.OS||ye.default.OS;var lt=Me.default;const st=function(e){var t=e.error,n=void 0!==t&&t,r=e.helperText,a=void 0===r?"":r,i=e.helperTextStyles,o=void 0===i?{}:i,s=e.style,u=e.disabled,c=void 0!==u&&u,d=(0,Ae.default)(e,at),p=(0,f.useTheme)().colors,m={backgroundColor:nt().darkMode?p.backdrop:p.surfaceVariant,color:c?p.outlineVariant:p.onSurfaceVariant};return(0,b.jsxs)(l.default,{children:[(0,b.jsx)(lt,ot(ot({style:[ut.input,s,m]},d),{},{editable:!c,selectTextOnFocus:!c,placeholderTextColor:p.textDisabled})),(0,b.jsx)(h.default,{style:[ut.helperText,{display:a?"flex":"none",color:n?p.danger:"#333"},o],children:a})]})};var ut=c.default.create({input:{paddingHorizontal:15,paddingVertical:10,borderRadius:10,marginTop:5},helperText:{fontSize:14}});const ct=function(){var e=(0,j.useNavigation)(),t=(0,f.useTheme)().colors,n=ge(),r=(0,u.useState)(null),a=(0,i.default)(r,2),o=a[0],s=a[1],c=function(){o&&s(null)};(0,u.useEffect)((function(){n&&e.replace("BottomNavigation")}),[n]);var d=function(){e.navigate("SignUp")};return(0,b.jsx)(se.default,{onPress:function(){switch(ye.default.OS){case"android":case"ios":le.default.dismiss()}},children:(0,b.jsxs)(l.default,{style:[ce.container,pt.container,{backgroundColor:t.auth}],dataSet:{media:ft.container},children:[(0,b.jsxs)(l.default,{style:pt.logoView,dataSet:{media:ft.logoView},children:[(0,b.jsx)(ue.default,{source:me,style:pt.logo,dataSet:{media:ft.logo}}),(0,b.jsx)(h.default,{style:pt.logoText,dataSet:{media:ft.logoText},children:"Festify"})]}),(0,b.jsx)(Ve.Formik,{initialValues:{email:"",password:""},validationSchema:Ue.object({email:Ue.string().trim(y().t("auth:email-trim")).strict(!0).email(y().t("auth:email-email")).required(y().t("auth:email-required")),password:Ue.string().trim(y().t("auth:password-trim")).strict(!0).required(y().t("auth:password-required"))}),onSubmit:function(e,t){var n=t.setSubmitting,r=e.email,a=e.password,i=(new He).email(r).password(a).build();Pe(i).catch((function(e){n(!1),(e.name="FirebaseAuthInvalidCredentialsException")?s(y().t("auth:invalid-credentials")):s(y().t("auth:unknown-error"))}))},children:function(e){var n=e.values,r=e.touched,a=e.errors,i=e.handleBlur,s=e.handleChange,u=e.handleSubmit,f=e.isSubmitting,g=e.isValidating;return(0,b.jsxs)(p.default,{style:pt.surface,dataSet:{media:ft.surface},children:[(0,b.jsx)(h.default,{style:pt.title,variant:"headlineMedium",dataSet:{media:ft.title},children:y().t("auth:Login")}),(0,b.jsxs)(l.default,{style:pt.inputContainer,children:[(0,b.jsx)(st,{placeholder:y().t("auth:Email"),value:n.email,onChangeText:s("email"),onBlur:i("email"),onFocus:c,style:pt.input,error:r.email&&Boolean(a.email),helperText:r.email&&a.email}),(0,b.jsx)(st,{placeholder:y().t("auth:Password"),value:n.password,onChangeText:s("password"),onBlur:i("password"),onFocus:c,style:pt.input,error:r.password&&Boolean(a.password),helperText:r.password&&a.password,secureTextEntry:!0}),(0,b.jsx)(h.default,{style:{display:o?"flex":"none",color:t.danger,textAlign:"center"},children:o})]}),(0,b.jsxs)(l.default,{style:pt.buttonContainer,children:[(0,b.jsx)(m.default,{mode:"contained",onPress:u,style:pt.button,contentStyle:pt.buttonContent,buttonColor:t.accent,disabled:f||g,children:y().t("auth:Login")}),(0,b.jsx)(m.default,{mode:"text",onPress:d,style:pt.button,contentStyle:pt.buttonContent,textColor:t.accent,disabled:f||g,children:y().t("auth:Sign Up")})]})]})}})]})})};var dt=s.default.create({container:{flexDirection:"column",justifyContent:"flex-end","@media only screen and (min-width: 640px)":{flexDirection:"row"}},inputContainer:{width:"80%"},input:{marginVertical:5},buttonContainer:{width:"60%",justifyContent:"center",alignItems:"center",marginTop:40},button:{width:"100%",marginVertical:2},buttonContent:{width:"100%",padding:5,alignItems:"center"},logo:{alignSelf:"center",width:100,height:100,"@media only screen and (min-width: 640px)":{width:130,height:130}},logoText:{fontSize:45,fontFamily:"PacificoRegular",color:fe.logo,alignSelf:"center",marginBottom:60,"@media only screen and (min-width: 640px)":{fontSize:70,marginBottom:0}},surface:{justifyContent:"center",alignItems:"center",paddingHorizontal:20,paddingVertical:40,borderTopLeftRadius:30,borderTopRightRadius:30,elevation:4,width:"100%","@media only screen and (min-width: 640px)":{flex:1,marginRight:140,maxWidth:500,borderRadius:30,paddingBottom:30}},logoView:{"@media only screen and (min-width: 640px)":{flex:1,marginHorizontal:80}},title:{display:"none",marginBottom:20,width:"80%","@media only screen and (min-width: 640px)":{display:"flex"}}}),ft=dt.ids,pt=dt.styles;const ht=function(){var e=(0,f.useTheme)().colors,t=(0,j.useNavigation)(),n=function(){t.navigate("Login")};return(0,b.jsx)(se.default,{onPress:function(){switch(ye.default.OS){case"android":case"ios":le.default.dismiss()}},children:(0,b.jsx)(l.default,{style:[ce.container,gt.container,{backgroundColor:e.auth}],children:(0,b.jsxs)(p.default,{style:gt.surface,dataSet:{media:yt.surface},children:[(0,b.jsx)(h.default,{style:gt.title,variant:"headlineSmall",dataSet:{media:yt.title},children:y().t("auth:Sign Up")}),(0,b.jsx)(Ve.Formik,{initialValues:{username:"",email:"",password:"",confirmPassword:""},validationSchema:Ue.object({username:Ue.string().trim(y().t("auth:username-trim")).strict(!0).min(4,y().t("auth:username-min").replace("{0}",4)).max(512,y().t("auth:username-max").replace("{0}",512)).required(y().t("auth:username-required")),email:Ue.string().trim(y().t("auth:email-trim")).strict(!0).email(y().t("auth:email-email")).required(y().t("auth:email-required")),password:Ue.string().trim(y().t("auth:password-trim")).strict(!0).min(6,y().t("auth:password-min").replace("{0}",6)).max(256,y().t("auth:password-max").replace("{0}",256)).required(y().t("auth:password-required")),confirmPassword:Ue.string().oneOf([Ue.ref("password"),null],y().t("auth:password-confirm"))}),onSubmit:function(){var e=(0,a.default)((function*(e,t){var n=t.setErrors,r=t.setSubmitting,a=e.username,i=e.email,o=e.password;try{if(yield ke(a))return n({username:y().t("auth:username-exists")}),void r(!1);var l=new Ee(a,i,o);yield Ce(l)}catch(s){r(!1),"auth/email-already-in-use"===s.code?n({email:y().t("auth:email-exists")}):"auth/invalid-email"===s.code?n({email:y().t("auth:email-email")}):"auth/operation-not-allowed"===s.code?alert(y().t("auth:operation-not-allowed")):"auth/weak-password"===s.code?n({password:y().t("auth:week-password")}):console.error(s)}}));return function(t,n){return e.apply(this,arguments)}}(),children:function(t){var r=t.values,a=t.touched,i=t.errors,o=t.handleBlur,s=t.handleChange,u=t.handleSubmit,c=t.isSubmitting,d=t.isValidating;return(0,b.jsxs)(l.default,{children:[(0,b.jsxs)(l.default,{style:gt.inputContainer,children:[(0,b.jsx)(st,{placeholder:y().t("auth:Username"),value:r.username,onChangeText:s("username"),onBlur:o("username"),style:gt.input,error:a.username&&Boolean(i.username),helperText:a.username&&i.username}),(0,b.jsx)(st,{placeholder:y().t("auth:Email"),value:r.email,onChangeText:s("email"),onBlur:o("email"),style:gt.input,error:a.email&&Boolean(i.email),helperText:a.email&&i.email}),(0,b.jsx)(st,{placeholder:y().t("auth:Password"),value:r.password,onChangeText:s("password"),onBlur:o("password"),style:gt.input,error:a.password&&Boolean(i.password),helperText:a.password&&i.password,secureTextEntry:!0}),(0,b.jsx)(st,{placeholder:y().t("auth:Confirm Password"),value:r.confirmPassword,onChangeText:s("confirmPassword"),onBlur:o("confirmPassword"),style:gt.input,error:a.confirmPassword&&Boolean(i.confirmPassword),helperText:a.confirmPassword&&i.confirmPassword,secureTextEntry:!0})]}),(0,b.jsxs)(l.default,{style:gt.buttonContainer,children:[(0,b.jsx)(m.default,{mode:"text",onPress:n,style:gt.button,contentStyle:gt.buttonContent,textColor:e.accent,children:y().t("auth:Login")}),(0,b.jsx)(m.default,{mode:"contained",onPress:u,style:[gt.button,gt.buttonRight],contentStyle:gt.buttonContent,buttonColor:e.accent,disabled:c||d,children:y().t("auth:Sign Up")})]})]})}})]})})})};var mt=s.default.create({container:{padding:30},surface:{width:"100%",padding:30,paddingHorizontal:40,borderRadius:15,elevation:3,"@media only screen and (min-width: 640px)":{width:"50%",maxWidth:600,paddingVertical:40}},title:{fontWeight:"bold",paddingLeft:5,"@media only screen and (min-width: 640px)":{marginBottom:5}},inputContainer:{marginVertical:10},input:{marginVertical:5},buttonContainer:{flexDirection:"row"},button:{flex:1,marginHorizontal:5},buttonRight:{flex:4}}),gt=mt.styles,yt=mt.ids,bt=n(68576),xt=n(1787),vt=n(62321),jt=n(33034);const wt=function(e){var t=e.title,n=void 0===t?"":t,r=e.subtitle,a=void 0===r?"":r,i=e.image,o=e.onCardPress,l=e.locked,s=void 0===l||l;return(0,b.jsx)(p.default,{style:Ot.surface,children:(0,b.jsx)(xt.default,{source:i,style:Ot.card,imageStyle:Ot.cardImage,children:(0,b.jsx)(B.default,{borderless:!0,onPress:s?null:o,style:Ot.ripple,rippleColor:s?"transparent":"rgba(200, 255, 255, .4)",children:(0,b.jsxs)(vt.default.Content,{style:[Ot.cardContent,{backgroundColor:s?"rgba(0,0,0, 0.65)":"rgba(0,0,0, 0.35)"}],dataSet:{media:Ct.cardContent},children:[(0,b.jsx)(h.default,{variant:"titleLarge",style:Ot.text,children:n}),(0,b.jsx)(h.default,{variant:"bodyMedium",style:[Ot.text,Ot.paragraph],children:a}),s&&(0,b.jsx)(jt.default,{name:"lock",size:25,style:Ot.lock})]})})})})};var St=s.default.create({surface:{flex:1,elevation:4,borderRadius:10},card:{flex:1,width:"auto",height:"auto"},ripple:{flex:1,borderRadius:10},cardContent:{flex:1,paddingVertical:20,borderRadius:10,"@media only screen and (min-width: 640px)":{justifyContent:"flex-end"}},cardImage:{borderRadius:10},text:{color:"white"},lock:{position:"absolute",right:10,bottom:10,color:"#ddd"}}),Ot=St.styles,Ct=St.ids;const Pt=function(){return(0,b.jsxs)(l.default,{style:kt.container,children:[(0,b.jsx)(h.default,{style:kt.text,children:y().t("lessons:Learning")}),(0,b.jsx)(h.default,{style:kt.smallerText,children:y().t("lessons:Path")})]})};var kt=c.default.create({container:{marginTop:10,marginBottom:20},text:{fontSize:34,fontWeight:"bold",paddingLeft:5},smallerText:{fontWeight:"bold",fontSize:32,paddingLeft:5,lineHeight:34}});const Tt=n.p+"static/media/spring.eda74050448d5b50c4fe.jpg",Dt=n.p+"static/media/summer.e0108fa1d8586b8fff32.jpg",zt=n.p+"static/media/autumn.8a1a737719f79b2e33c9.jpg",Lt=n.p+"static/media/winter.9ed44c475ac666fb3a1b.jpg";var Et=n(93433);function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bt=function(e,t,n){var r=e.map((function(e){return P.collection("seasons").doc(e)})),a=[];r.forEach((function(e){var r=e.onSnapshot((function(e){if(e.exists){var n=e.data().card_count,r=e.id,a=(0,T.default)({},r,n);t(a)}}),(function(e){n(e)}));a.push(r)}));return function(){return a.forEach((function(e){return e()}))}},Ht=function(e,t,n){return P.collection("users").doc(e).onSnapshot((function(e){var n;t(null==(n=e.data())?void 0:n.unlocked_seasons)}),(function(e){n(e)}))},Vt=function(e){return P.collection("seasons_timeline").doc(e).get().then((function(e){return e.exists?e.data():null}))},Ut=function(e,t){return P.collection("users").doc(e).get().then((function(e){return e.exists?e.data().unlocked_lessons[t]:null}))},At=function(e){return e.get().then((function(e){return e.exists?e.data():null}))},Mt=function(e){return e.get().then((function(e){return e.exists?It(It({},e.data()),{},{id:e.id}):null}))},Nt=function(){var e=(0,a.default)((function*(e,t,n,r){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=yield P.collection("users").doc(e).get();if(o.exists){var l=o.data(),s=l.completed_lessons,u=l.xp,c=l.collected_rewards,d=[].concat((0,Et.default)(s[t]),[n]),f=(a={},(0,T.default)(a,"completed_lessons."+t,d),(0,T.default)(a,"xp",u+r),a);if(i){var p=[].concat((0,Et.default)(c),[i]);f.collected_rewards=p}return P.collection("users").doc(e).update(f)}}));return function(t,n,r,a){return e.apply(this,arguments)}}(),_t=function(e,t,n){return P.collection("users").doc(e).get().then((function(e){var r;return!!e.exists&&(null==(r=e.data().completed_lessons[t])?void 0:r.includes(n))}))},Wt=function(){var e=(0,a.default)((function*(e,t,n){var r,a=yield P.collection("users").doc(e).get();if(a.exists){var i=a.data().unlocked_lessons,o=[].concat((0,Et.default)(i[t]),[n]);return P.collection("users").doc(e).update((r={},(0,T.default)(r,"unlocked_lessons."+t,o),(0,T.default)(r,"current_lesson",{season:t,index:n}),r))}}));return function(t,n,r){return e.apply(this,arguments)}}(),qt=function(){var e=(0,a.default)((function*(e,t){var n=yield P.collection("users").doc(e).get();if(n.exists){var r=n.data().unlocked_seasons,a=[].concat((0,Et.default)(r),[t]);return P.collection("users").doc(e).update({unlocked_seasons:a,current_lesson:{season:t,index:0}})}}));return function(t,n){return e.apply(this,arguments)}}(),Ft=function(){var e=(0,a.default)((function*(e){var t=yield P.collection("users").doc(e).get();return t.exists?t.data().current_lesson:null}));return function(t){return e.apply(this,arguments)}}();function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jt=(0,u.createContext)();function Qt(){return(0,u.useContext)(Jt)}function Yt(e){var t=e.children,n=["spring","summer","autumn","winter"],r=(0,u.useState)({}),o=(0,i.default)(r,2),l=o[0],s=o[1],c=(0,u.useState)([]),d=(0,i.default)(c,2),f=d[0],p=d[1],h=(0,u.useState)(null),m=(0,i.default)(h,2),g=m[0],y=m[1],x=(0,u.useState)(null),v=(0,i.default)(x,2),w=v[0],S=v[1],O=(0,u.useState)(-1),P=(0,i.default)(O,2),k=P[0],T=P[1],D=(0,u.useState)(null),z=(0,i.default)(D,2),L=z[0],E=z[1],R=(0,u.useState)(null),I=(0,i.default)(R,2),B=I[0],H=I[1],V=(0,u.useState)(0),U=(0,i.default)(V,2),A=U[0],M=U[1],N=(0,u.useState)(!1),_=(0,i.default)(N,2),W=_[0],q=_[1],F=(0,u.useState)({pageCount:0,questionCount:0,stepsCount:0}),G=(0,i.default)(F,2),X=G[0],J=G[1],Q=function(e){s((function(t){return Xt(Xt({},t),e)}))},Y=function(){var e=(0,a.default)((function*(e){try{return yield Vt(e)}catch(t){console.error(t)}}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,a.default)((function*(e){try{return yield Ut(C.currentUser.uid,e)}catch(t){console.error(t)}}));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,a.default)((function*(e){if(e)try{var t=yield Mt(e);H(t)}catch(n){console.error(n)}}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,a.default)((function*(){try{var e=yield At(g),t=e.reward;yield Z(t),E(e),function(e){var t=e.content,n=e.questions,r=t?Object.keys(t).length:0,a=n?n.length:0;J((function(e){return Xt(Xt({},e),{},{pageCount:r,questionCount:a,stepsCount:r+a})}))}(e)}catch(n){console.error(n)}}));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.default)((function*(){var e=L.xp_reward,t=void 0===e?0:e;try{return yield Nt(C.currentUser.uid,w,k,t,null==B?void 0:B.id)}catch(n){console.error(n)}}));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,a.default)((function*(){try{return yield _t(C.currentUser.uid,w,k)}catch(e){console.error(e)}}));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=(0,a.default)((function*(){try{var e=k+1;return yield Wt(C.currentUser.uid,w,e)}catch(t){console.error(t)}}));return function(){return e.apply(this,arguments)}}(),re=function(){var e=(0,a.default)((function*(){try{var e=n.indexOf(w)+1,t=n[e];if("string"===typeof t)return yield qt(C.currentUser.uid,t)}catch(r){console.error(r)}}));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=(0,a.default)((function*(){try{return yield Ft(C.currentUser.uid)}catch(e){console.error(e)}}));return function(){return e.apply(this,arguments)}}();(0,j.useFocusEffect)((0,u.useCallback)((function(){if(C.currentUser){var e=function(){var e=Ht(C.currentUser.uid,p,console.error),t=Bt(n,Q,console.error);return function(){e(),t()}}();return function(){e()}}}),[C.currentUser]));var ie={seasons:n,unlockedSeasons:f,seasonsData:l,currentLessonRef:g,setCurrentLessonRef:y,getTimelineDataBySeason:Y,getUnlockedLessonsBySeason:K,loadLessonData:$,unloadLessonData:function(){E(null),H(null),M(0),q(!1)},lessonData:L,currentStep:A,setCurrentStep:M,counter:X,lessonFinished:W,setLessonFinished:q,currentLessonIndex:k,setCurrentLessonIndex:T,currentSeason:w,setCurrentSeason:S,completeLesson:ee,checkCompletedLesson:te,tryUnlockNewLessonOrSeason:function(){!L.last_for_season?ne():re()},getCurrentLesson:ae,rewardData:B};return(0,b.jsx)(Jt.Provider,{value:ie,children:t})}const Kt=function(){var e=(0,j.useNavigation)(),t=Qt(),n=t.seasonsData,r=t.unlockedSeasons,a=function(t){return function(){var n=t.capitalize()+" Timeline",r={forSeason:t,title:t.capitalize()+" holidays",appBarTitle:n};e.navigate("Season Timeline",r)}};return(0,b.jsxs)(bt.default,{style:$t.flexContainer,contentContainerStyle:$t.scrollContainer,dataSet:{media:en.scrollContainer},children:[(0,b.jsx)(Pt,{}),(0,b.jsxs)(l.default,{style:$t.seasonsContainer,dataSet:{media:en.seasonsContainer},children:[(0,b.jsx)(l.default,{style:$t.cardContainer,dataSet:{media:en.cardContainer},children:(0,b.jsx)(wt,{title:y().t("lessons:Spring holidays"),subtitle:(n.spring||0)+" "+y().t("lessons:holidays"),image:Tt,onCardPress:a("spring"),locked:!r.includes("spring")})}),(0,b.jsx)(l.default,{style:$t.cardContainer,dataSet:{media:en.cardContainer},children:(0,b.jsx)(wt,{title:y().t("lessons:Summer holidays"),subtitle:(n.summer||0)+" "+y().t("lessons:holidays"),image:Dt,onCardPress:a("summer"),locked:!r.includes("summer")})}),(0,b.jsx)(l.default,{style:$t.cardContainer,dataSet:{media:en.cardContainer},children:(0,b.jsx)(wt,{title:y().t("lessons:Autumn holidays"),subtitle:(n.autumn||0)+" "+y().t("lessons:holidays"),image:zt,onCardPress:a("autumn"),locked:!r.includes("autumn")})}),(0,b.jsx)(l.default,{style:$t.cardContainer,dataSet:{media:en.cardContainer},children:(0,b.jsx)(wt,{title:y().t("lessons:Winter holidays"),subtitle:(n.winter||0)+" "+y().t("lessons:holidays"),image:Lt,onCardPress:a("winter"),locked:!r.includes("winter")})})]})]})};var Zt=s.default.create({cardContainer:{marginVertical:14,"@media only screen and (min-width: 640px)":{flex:1,aspectRatio:1.25}},flexContainer:{flex:1},scrollContainer:{padding:20,"@media only screen and (min-width: 640px)":{paddingHorizontal:60}},seasonsContainer:{"@media only screen and (min-width: 640px)":{flexDirection:"row",alignItems:"center",flexWrap:"wrap",gap:25}}}),$t=Zt.styles,en=Zt.ids;const tn=function(e){var t=e.size,n=void 0===t?80:t,r=e.image,a=e.locked,i=void 0===a||a,o=(0,f.useTheme)().colors;return(0,b.jsxs)(l.default,{style:[nn.circle,{borderColor:o.elevation.level4}],children:[r&&(0,b.jsx)(d.default,{size:n,source:r}),i&&(0,b.jsx)(l.default,{style:nn.lockContainer,children:(0,b.jsx)(jt.default,{name:"lock",size:25,style:{color:o.inverseOnSurface}})})]})};var nn=c.default.create({circle:{borderRadius:100,borderWidth:6,zIndex:2},lockContainer:{backgroundColor:"rgba(0,0,0, 0.35)",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:100,top:0,bottom:0,left:0,right:0}});const rn=function(e){var t=e.title,n=void 0===t?"":t,r=e.date,a=void 0===r?"":r,i=e.expanded,o=void 0===i?-1:i,s=e.onExpand,u=e.lessonIndex,c=e.lessonRef,d=(0,f.useTheme)().colors,m=(0,j.useNavigation)(),g=Qt(),y=g.setCurrentLessonRef,x=g.setCurrentLessonIndex,v=function(){y(c),x(u),m.navigate("Lesson Screen")};return(0,b.jsx)(p.default,{style:an.container,children:(0,b.jsx)(B.default,{onPress:function(){o!==u?s(u):v()},style:an.cardRipple,borderless:!0,centered:!0,children:(0,b.jsxs)(l.default,{style:an.contentWrapper,children:[(0,b.jsxs)(l.default,{style:an.content,children:[(0,b.jsx)(h.default,{style:an.title,children:n}),(0,b.jsx)(h.default,{style:an.date,children:a})]}),o===u&&(0,b.jsx)(l.default,{children:(0,b.jsx)(B.default,{onPress:v,style:an.playButton,borderless:!0,centered:!0,children:(0,b.jsx)(Q.default,{name:"play-circle-outline",size:25,color:d.text})})})]})})})};var an=c.default.create({container:{position:"relative",left:-25,borderRadius:6,elevation:2},cardRipple:{borderRadius:6},contentWrapper:{paddingVertical:8},content:{paddingHorizontal:30,paddingLeft:45},title:{fontSize:18},date:{fontSize:14,lineHeight:20},playButton:{alignSelf:"flex-end",borderRadius:100,paddingVertical:1,paddingHorizontal:2,marginHorizontal:5}});const on=function(e){var t=e.title,n=e.date,r=e.image,a=e.locked,i=void 0===a||a,o=e.expanded,s=void 0===o?-1:o,u=e.lessonIndex,c=e.onExpand,d=e.lessonRef,p=(0,f.useTheme)().colors;return(0,b.jsxs)(l.default,{style:ln.card,children:[(0,b.jsx)(l.default,{style:[ln.timeline,{borderColor:p.primary}]}),(0,b.jsx)(tn,{size:60,image:r,locked:i}),!i&&(0,b.jsx)(rn,{title:t,date:n,expanded:s,lessonIndex:u,onExpand:c,lessonRef:d})]})};var ln=c.default.create({card:{flexDirection:"row",alignItems:"center",paddingVertical:15},timeline:{position:"absolute",width:0,borderLeftWidth:3,left:34,bottom:0,top:0}});const sn=function(e){var t=e.title;return(0,b.jsx)(l.default,{children:(0,b.jsx)(h.default,{style:un.title,children:y().t(t)})})};var un=c.default.create({title:{fontSize:28,fontWeight:"bold",paddingVertical:20,paddingLeft:10}});function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const fn=function(e){var t=e.route.params,n=t.forSeason,r=t.title,o=(0,u.useState)(-1),s=(0,i.default)(o,2),c=s[0],d=s[1],f=(0,u.useState)([]),p=(0,i.default)(f,2),h=p[0],m=p[1],g=(0,u.useState)(-1),y=(0,i.default)(g,2),x=y[0],v=y[1],O=(0,u.useRef)(null),C=Qt(),P=C.getTimelineDataBySeason,k=C.getUnlockedLessonsBySeason,T=C.getCurrentLesson,D=C.setCurrentSeason,z=function(){var e=(0,a.default)((function*(e){var t=yield k(n);return e.map((function(e,n){return{title:e.name||"",date:e.celebrated_on||"",image:e.thumbnail?{uri:e.thumbnail}:S,lessonRef:e.lessonRef,locked:!Boolean(null==t?void 0:t.includes(n)),lessonIndex:n,onExpand:d}}))}));return function(t){return e.apply(this,arguments)}}();(0,j.useFocusEffect)((0,u.useCallback)((function(){(0,a.default)((function*(){var e=(yield P(n)).holidays,t=yield z(e);m(t),D(n);var r=yield T();v(n===r.season?r.index:-1)}))()}),[n])),(0,j.useFocusEffect)((0,u.useCallback)((function(){-1!==x&&O.current&&h.length>0&&(O.current.scrollToIndex({animated:!0,index:x}),d(x))}),[h,O.current,x]));var L=function(){var e=(0,a.default)((function*(e){var t;yield new Promise((function(e){return setTimeout(e,500)})),null==(t=O.current)||t.scrollToIndex({index:e.index,animated:!0})}));return function(t){return e.apply(this,arguments)}}();return(0,b.jsx)(l.default,{style:hn.timelineWrapper,dataSet:{media:mn.timelineWrapper},children:(0,b.jsx)(W.default,{style:hn.timeline,dataSet:{media:mn.timeline},data:h,ref:O,onScrollToIndexFailed:L,renderItem:function(e){var t=e.item;return(0,b.jsx)(on,dn(dn({},t),{},{expanded:c}))},keyExtractor:function(e){return e.lessonIndex},ListHeaderComponent:function(){return h.length>0?(0,b.jsx)(l.default,{children:(0,b.jsx)(sn,{title:"lessons:"+r})}):null},ListEmptyComponent:function(){return(0,b.jsx)(w.default,{size:"large",style:hn.indicator})},contentContainerStyle:hn.timelineContainer,showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1})})};var pn=s.default.create({timelineWrapper:{flex:1,"@media only screen and (min-width: 640px)":{alignItems:"center"}},timelineContainer:{paddingBottom:20,paddingHorizontal:20},timeline:{flex:1,"@media only screen and (min-width: 640px)":{flex:"auto",width:"max-content"}},indicator:{marginTop:"80%"}}),hn=pn.styles,mn=pn.ids;const gn=function(e){var t=e.steps,n=e.currentStep,r=(0,f.useTheme)().colors,a=Array(t).fill(null).map((function(e,t){return(0,b.jsx)(l.default,{style:[{backgroundColor:r.primary},n===t?{backgroundColor:r.accent}:null,bn.step]},t)}));return(0,b.jsx)(l.default,{style:bn.stepContainer,dataSet:{media:xn.stepContainer},children:a})};var yn=s.default.create({stepContainer:{marginTop:30,paddingHorizontal:20,paddingVertical:20,flexDirection:"row","@media only screen and (min-width: 640px)":{paddingHorizontal:"10%"}},step:{flex:1,height:8,marginHorizontal:5,borderRadius:100}}),bn=yn.styles,xn=yn.ids;const vn=function(e){var t=e.title,n=void 0===t?"":t;return(0,b.jsx)(h.default,{style:jn.title,children:n})};var jn=c.default.create({title:{fontSize:30,paddingVertical:10,paddingLeft:10}});const wn=function(e){var t=e.title,n=e.content;return(0,b.jsx)(bt.default,{showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1,children:(0,b.jsxs)(l.default,{style:On.lessonContainer,dataSet:{media:Cn.lessonContainer},children:[t&&(0,b.jsx)(vn,{title:t}),(0,b.jsx)(l.default,{style:On.contentContainer,dataSet:{media:Cn.contentContainer},children:n&&n.map((function(e,t){return function(e,t){switch(e.type){case"text":return(0,b.jsx)(h.default,{style:On.text,dataSet:{media:Cn.text},children:e.value},t);case"image":return(0,b.jsx)(l.default,{style:On.imageContainer,dataSet:{media:Cn.imageContainer},children:(0,b.jsx)(ue.default,{source:{uri:e.value},resizeMode:"contain",style:On.image})},t)}}(e,t)}))})]})})};var Sn=s.default.create({lessonContainer:{paddingHorizontal:30,paddingTop:10,flex:1,"@media only screen and (min-width: 640px)":{paddingHorizontal:"10%"}},contentContainer:{flex:1,flexDirection:"column","@media only screen and (min-width: 640px)":{flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",alignItems:"center"}},imageContainer:{marginVertical:10,height:"web"==ye.default.OS?"30vh":Math.round(9*Z.default.get("window").width/16),"@media only screen and (min-width: 640px)":{flex:1,minWidth:"49%",height:"50vh",maxHeight:"50vh",paddingHorizontal:10}},image:{borderRadius:4,width:"100%",height:"100%"},text:{flex:1,minWidth:"51%",fontSize:16,lineHeight:20,paddingVertical:10,textAlign:"justify","@media only screen and (min-width: 640px)":{fontSize:18,lineHeight:25,paddingHorizontal:10}}}),On=Sn.styles,Cn=Sn.ids;const Pn=function(e){var t=e.title,n=void 0===t?"":t;return(0,b.jsx)(h.default,{style:kn.title,children:n})};var kn=c.default.create({title:{textAlign:"center",fontSize:26,paddingVertical:20}}),Tn=(0,u.createContext)();function Dn(){return(0,u.useContext)(Tn)}function zn(e){var t=e.children,n=e.question,r=(0,u.useState)(-1),a=(0,i.default)(r,2),o=a[0],l=a[1],s=(0,u.useState)("normal"),c=(0,i.default)(s,2),d=c[0],f=c[1],p=function(){l(-1),f("normal")};(0,u.useLayoutEffect)((function(){p()}),[n]);var h={question:n,currentChoice:o,setCurrentChoice:l,questionState:d,resetQuestionState:p,checkAnswer:function(){var e=n.answer;f(o===e?"correct":"incorrect")}};return(0,b.jsx)(Tn.Provider,{value:h,children:t})}const Ln=function(e){var t=e.text,n=void 0===t?"":t,r=e.selectIndex,a=(0,u.useState)("normal"),o=(0,i.default)(a,2),s=o[0],c=o[1],d=(0,f.useTheme)().colors,m={},g=Dn(),y=g.currentChoice,x=g.setCurrentChoice,v=g.questionState;switch((0,u.useLayoutEffect)((function(){c(y===r?"selected":"normal")}),[y]),(0,u.useLayoutEffect)((function(){c(y===r?v:"normal")}),[v]),s){case"correct":case"selected":case"incorrect":m.borderWidth=2;break;default:m.borderWidth=0}switch(s){case"correct":m.borderColor=d.success;break;case"selected":m.borderColor=d.primary;break;case"incorrect":m.borderColor=d.danger;break;default:m.borderColor="transparent"}return(0,b.jsx)(p.default,{elevation:1,style:[En.cardSurface,m],children:(0,b.jsx)(B.default,{onPress:function(){switch(v){case"correct":case"incorrect":return!0;default:return!1}}()?null:function(){x(r)},borderless:!0,centered:!0,style:En.ripple,children:(0,b.jsxs)(l.default,{style:En.cardContent,children:[(0,b.jsx)(h.default,{style:En.text,children:n}),"correct"===s?(0,b.jsx)(Q.default,{name:"checkmark",size:24,color:d.success}):"incorrect"===s?(0,b.jsx)(Q.default,{name:"close",size:24,color:d.danger}):null]})})})};var En=c.default.create({cardSurface:{borderRadius:6,marginVertical:6},ripple:{borderRadius:6},cardContent:{flexDirection:"row",alignItems:"center"},text:{fontSize:18,paddingHorizontal:15,paddingVertical:12}});const Rn=function(){var e=Dn().question;return(0,b.jsxs)(l.default,{style:Bn.questionContainer,dataSet:{media:Hn.questionContainer},children:[(0,b.jsx)(Pn,{title:e.title}),(0,b.jsx)(l.default,{style:Bn.answerContainer,children:e.choices.map((function(e,t){return(0,b.jsx)(Ln,{text:e,selectIndex:t},t)}))})]})};var In=s.default.create({questionContainer:{flex:1,paddingHorizontal:30,justifyContent:"space-between","@media only screen and (min-width: 640px)":{paddingHorizontal:"10%"}},answerContainer:{marginBottom:30}}),Bn=In.styles,Hn=In.ids,Vn=["children","style","size","fullWidth"];function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Mn=function(e){var t=e.children,n=e.style,r=e.size,a=void 0===r?5:r,i=e.fullWidth,o=void 0!==i&&i,s=(0,Ae.default)(e,Vn),u=(0,f.useTheme)().colors;return(0,b.jsx)(l.default,{style:Nn.buttonContainer,children:(0,b.jsx)(m.default,An(An({style:[n,Nn.button,{width:o?"100%":"auto"}],contentStyle:[Nn.buttonContent,{padding:a}],color:u.primary},s),{},{children:t}))})};var Nn=c.default.create({buttonContainer:{alignItems:"center",justifyContent:"center"},button:{marginVertical:2,justifyContent:"center"},buttonContent:{width:"100%",alignItems:"center",justifyContent:"center"}}),_n=n(46458);function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Fn=function(e){var t=e.onBackButtonPress,n=e.onActionButtonPress,r=e.actionButtonText,a=void 0===r?"":r,i=e.actionButtonDisabled,o=void 0!==i&&i,s=(0,f.useTheme)().colors,u={borderTopColor:s.divider,backgroundColor:s.surface};return(0,b.jsxs)(l.default,{style:[Gn.navigationContainer,u],children:[(0,b.jsx)(_n.default,{icon:function(e){return(0,b.jsx)(Q.default,qn(qn({name:"caret-back-circle"},e),{},{color:s.accent}))},size:35,style:Gn.backButton,onPress:t}),(0,b.jsx)(Mn,{mode:"contained",size:2,style:Gn.actionButton,onPress:n,disabled:o,children:y().t("lessons:"+a)})]})};var Gn=c.default.create({navigationContainer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderTopWidth:1,paddingVertical:2},backButton:{margin:0,marginLeft:20},actionButton:{alignSelf:"flex-end",marginRight:20}});const Xn=function(){var e=(0,j.useNavigation)(),t=Qt(),n=t.currentStep,r=t.setCurrentStep,a=t.counter;return(0,b.jsx)(Fn,{onBackButtonPress:function(){n>0?r(n-1):e.goBack()},onActionButtonPress:function(){var e=n+1;e<a.stepsCount&&r(e)},actionButtonText:"Next",actionButtonDisabled:!1})};const Jn=function(){var e=(0,j.useNavigation)(),t=Qt(),n=t.currentStep,r=t.setCurrentStep,o=t.counter,l=t.setLessonFinished,s=t.checkCompletedLesson,c=t.tryUnlockNewLessonOrSeason,d=(0,u.useState)("Check"),f=(0,i.default)(d,2),p=f[0],h=f[1],m=Dn(),g=m.currentChoice,y=m.questionState,x=m.resetQuestionState,v=m.checkAnswer;(0,u.useEffect)((function(){!function(e){switch(e){case"correct":if(n+1<o.stepsCount){h("Next");break}h("Finish");break;case"incorrect":h("Try again");break;case"normal":h("Check")}}(y)}),[y]);var w=function(){var t=(0,a.default)((function*(){(yield s())?e.goBack():(l(!0),c())}));return function(){return t.apply(this,arguments)}}();return(0,b.jsx)(Fn,{onBackButtonPress:function(){n>0?r(n-1):e.goBack()},onActionButtonPress:function(){switch(y){case"correct":!function(){var e=n+1;e<o.stepsCount?r(e):w()}();break;case"incorrect":x();break;case"normal":v()}},actionButtonText:p,actionButtonDisabled:-1===g&&"normal"===y})};const Qn=function(e){var t=e.lesson,n=e.counter,r=e.currentStep,a=n.pageCount,i=n.stepsCount;return r<a?(0,b.jsxs)(u.Fragment,{children:[(0,b.jsx)(wn,{title:t.holiday_name,content:t.content["page"+r]}),(0,b.jsx)(Xn,{})]}):r<i?(0,b.jsxs)(zn,{question:function(){var e=r-a;return t.questions[e]}(),children:[(0,b.jsx)(Rn,{}),(0,b.jsx)(Jn,{})]}):null};var Yn=n(40196);const Kn=function(){var e=Qt(),t=e.lessonData,n=e.lessonFinished,r=e.completeLesson,i=e.rewardData,o=(0,f.useTheme)().colors,s=(0,j.useNavigation)(),u=function(){var e=(0,a.default)((function*(){yield r(),s.goBack()}));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(Yn.default,{animationType:"fade",visible:n,children:(0,b.jsx)(l.default,{style:{backgroundColor:o.surface,flex:1},children:(0,b.jsx)(l.default,{style:[ce.container,Zn.contentContainer,{backgroundColor:o.surface,borderColor:o.primary}],children:(0,b.jsxs)(l.default,{children:[(0,b.jsxs)(h.default,{variant:"headlineSmall",style:Zn.headline,children:["\ud83c\udf89 ",y().t("lessons:Congratulations")," \ud83c\udf89"]}),(0,b.jsx)(h.default,{variant:"titleMedium",style:Zn.subheading,children:y().t("lessons:On learning the holiday")+" "+t.holiday_name}),(0,b.jsx)(h.default,{style:Zn.rewardText,children:y().t("lessons:Reward")}),(0,b.jsxs)(l.default,{style:Zn.rewardContainer,children:[(0,b.jsx)(h.default,{style:Zn.rewardXP,children:t.xp_reward||0}),(0,b.jsx)(H.default,{name:"star",size:24,color:o.xp})]}),i?(0,b.jsxs)(l.default,{style:Zn.additionalReward,children:[(0,b.jsx)(ue.default,{source:i.thumbnail?{uri:i.thumbnail}:S,style:Zn.rewardImage,resizeMode:"contain"}),(0,b.jsx)(h.default,{style:Zn.additionalRewardText,children:i.name})]}):null,(0,b.jsx)(Mn,{onPress:u,mode:"contained",children:y().t("lessons:Continue")})]})})})})};var Zn=c.default.create({contentContainer:{borderWidth:4,margin:6,borderStyle:"dashed",borderRadius:1},headline:{textAlign:"center",fontSize:32},subheading:{textAlign:"center",marginVertical:20,lineHeight:30,fontSize:22,paddingHorizontal:35},rewardText:{fontSize:28,textAlign:"center",marginTop:30},rewardContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginVertical:10},rewardXP:{fontSize:24,paddingHorizontal:4},additionalReward:{marginBottom:20,alignItems:"center"},rewardImage:{width:120,height:120},additionalRewardText:{fontSize:18}});const $n=function(){var e=Qt(),t=e.currentLessonRef,n=e.loadLessonData,r=e.unloadLessonData,a=e.lessonData,i=e.currentStep,o=e.counter;return(0,j.useFocusEffect)((0,u.useCallback)((function(){return t&&n(),r}),[t])),(0,b.jsx)(l.default,{style:er.flexContainer,children:a?(0,b.jsxs)(l.default,{style:er.flexContainer,children:[(0,b.jsx)(gn,{steps:o.stepsCount,currentStep:i}),(0,b.jsx)(Qn,{lesson:a,counter:o,currentStep:i}),(0,b.jsx)(Kn,{})]}):(0,b.jsx)(w.default,{size:"large",style:er.indicator})})};var er=c.default.create({flexContainer:{flex:1},indicator:{alignSelf:"center",flex:1}}),tr=function(e){return P.collection("users").doc(e).get().then((function(e){var t;return null==(t=e.data())?void 0:t.avatar}))},nr=function(){var e=(0,a.default)((function*(e,t){var n=e.substring(e.lastIndexOf("/")+1),r=yield new Promise((function(t,n){var r=new XMLHttpRequest;r.onload=function(){t(r.response)},r.onerror=function(e){console.error(e),n(new TypeError("Network request failed"))},r.responseType="blob",r.open("GET",e,!0),r.send(null)}));return k.ref("images/users/"+t+"/"+n).put(r).then((function(e){return URL.revokeObjectURL(r),e.ref.getDownloadURL()}))}));return function(t,n){return e.apply(this,arguments)}}(),rr=function(e){return P.collection("users").doc(e).get().then((function(e){var t;return null==(t=e.data())?void 0:t.username}))},ar=function(e,t){var n=t.username,r=t.avatar;return P.collection("users").doc(e).update({username:n,avatar:r})},ir=(0,u.createContext)();function or(){return(0,u.useContext)(ir)}function lr(e){var t=e.children,n=(0,u.useState)(""),r=(0,i.default)(n,2),o=r[0],l=r[1],s=(0,u.useState)(""),c=(0,i.default)(s,2),d=c[0],f=c[1],p=(0,u.useState)(null),h=(0,i.default)(p,2),m=h[0],g=h[1],y=function(){var e=(0,a.default)((function*(e){var t=e.newUsername,n=e.newAvatar,r={username:null!=t?t:o,avatar:null!=n?n:m};try{return yield ar(C.currentUser.uid,r),l(r.username),g(r.avatar),!0}catch(a){return console.error(a),!1}}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.default)((function*(e){try{return yield nr(e,C.currentUser.uid)}catch(t){return console.error(t),null}}));return function(t){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){var e;C.currentUser&&(rr(C.currentUser.uid).then((function(e){return l(e)})).catch((function(e){return console.error(e)})),f(null==(e=C.currentUser)?void 0:e.email),tr(C.currentUser.uid).then((function(e){return g(e)})).catch((function(e){return console.error(e)})))}),[C.currentUser]);var v={username:o,email:d,avatar:m,updateProfile:y,saveAvatar:x};return(0,b.jsx)(ir.Provider,{value:v,children:t})}const sr=function(){var e=(0,j.useNavigation)(),t=or(),n=t.username,r=t.email,a=t.avatar,i={borderColor:(0,f.useTheme)().colors.onPrimary};return(0,b.jsxs)(p.default,{style:ur.surface,elevation:2,children:[(0,b.jsx)(J,{style:[ur.avatar,i],size:70,image:a,username:n,borderWidth:6}),(0,b.jsx)(_n.default,{icon:"circle-edit-outline",size:20,onPress:function(){e.navigate("Edit Profile")},style:ur.edit}),(0,b.jsxs)(l.default,{style:ur.infoContainer,children:[(0,b.jsx)(h.default,{style:ur.username,children:n}),(0,b.jsx)(h.default,{style:ur.email,children:r})]})]})};var ur=c.default.create({surface:{flexDirection:"row",paddingHorizontal:20,paddingVertical:25,borderRadius:6},avatar:{marginTop:-45},infoContainer:{flex:1,paddingHorizontal:10,justifyContent:"center",marginRight:20},username:{fontSize:16,fontWeight:"bold"},email:{fontSize:14},edit:{position:"absolute",right:5}}),cr=n(57986),dr=n(76770),fr=n(52149),pr=n(58551),hr=n(718);function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const yr=function(e){var t=e.listOptions,n=(0,j.useNavigation)(),r=nt(),a=r.toggleTheme,i=r.darkMode,o=t.setLPickerOpen;return(0,b.jsx)(p.default,{elevation:1,style:br.surface,children:(0,b.jsxs)(cr.default,{title:y().t("profile:General"),titleStyle:br.title,children:[(0,b.jsx)(dr.default,{style:br.divider}),(0,b.jsx)(fr.default,{style:br.container,title:y().t("profile:Dark Mode"),onPress:function(){return null},left:function(e){return(0,b.jsx)(pr.default,gr(gr({},e),{},{icon:function(e){return(0,b.jsx)(Q.default,gr({name:"moon-outline"},e))}}))},right:function(e){return(0,b.jsx)(hr.default,gr(gr({},e),{},{onValueChange:a,value:i,style:br.switch}))}}),(0,b.jsx)(dr.default,{style:br.divider}),(0,b.jsx)(fr.default,{style:br.container,title:y().t("profile:Language"),onPress:function(){return o(!0)},left:function(e){return(0,b.jsx)(pr.default,gr(gr({},e),{},{icon:function(e){return(0,b.jsx)(Q.default,gr({name:"language-outline"},e))}}))}}),(0,b.jsx)(dr.default,{style:br.divider}),(0,b.jsx)(fr.default,{style:br.container,title:y().t("profile:My Rewards"),left:function(e){return(0,b.jsx)(pr.default,gr(gr({},e),{},{icon:function(e){return(0,b.jsx)(Q.default,gr({name:"star-outline"},e))}}))},onPress:function(){n.navigate("My Collection")}}),(0,b.jsx)(dr.default,{style:br.divider}),(0,b.jsx)(fr.default,{style:br.container,title:y().t("profile:Logout"),left:function(e){return(0,b.jsx)(pr.default,gr(gr({},e),{},{icon:function(e){return(0,b.jsx)(Q.default,gr({name:"log-out-outline"},e))}}))},onPress:function(){C.signOut().then((function(){n.replace("Login")})).catch((function(e){return alert(e.message)}))}})]})})};var br=c.default.create({surface:{marginTop:60,borderRadius:16},listItem:{padding:0},divider:{height:1},container:{paddingHorizontal:20},title:{paddingLeft:20},switch:{height:20,alignSelf:"center"}}),xr=n(75833),vr=n(33523);const jr=JSON.parse('{"Home":"Home","Lessons":"Lessons","Leaderboard":"Leaderboard","Profile":"Profile","Edit Profile":"Edit Profile","Spring Timeline":"Spring Timeline","Summer Timeline":"Summer Timeline","Autumn Timeline":"Autumn Timeline","Winter Timeline":"Winter Timeline","My Collection":"My Collection","auth:Sign Up":"Sign up","auth:SignUp":"Sign up","auth:Login":"Login","auth:Username":"Username","auth:Email":"Email","auth:Password":"Password","auth:Confirm Password":"Confirm Password","auth:username-trim":"The username cannot include leading and trailing spaces","auth:username-min":"The username needs to be at least {0} characters","auth:username-max":"The username cannot exceed {0} characters","auth:username-required":"The username is required","auth:username-exists":"Username is taken","auth:unknown-error":"Unknown error occurred. Please try again later","auth:email-trim":"The email cannot include leading and trailing spaces","auth:email-email":"The email is invalid","auth:email-required":"The email is required","auth:password-trim":"The password cannot include leading and trailing spaces","auth:password-min":"The password needs to be at least {0} characters","auth:password-max":"The password cannot exceed {0} characters","auth:password-required":"The password is required","auth:password-confirm":"Passwords do not match","auth:invalid-credentials":"Invalid username or password","auth:email-exists":"\u0415mail was used by another user","auth:operation-not-allowed":"Operation not allowed","auth:week-password":"Week password","profile:General":"General","profile:Dark Mode":"Dark Mode","profile:My Rewards":"My Awards","profile:Logout":"Logout","profile:Language":"Language","profile:Select language":"Select language","profile:System":"System","change-profile:Change picture":"Change picture","change-profile:Username":"Username","change-profile:Email":"Email","change-profile:Save":"Save","change-profile:username-min":"The username needs to be at least {0} characters","change-profile:username-max":"The username cannot exceed {0} characters","change-profile:Choose from":"Choose from","change-profile:Camera":"Camera","change-profile:Gallery":"Gallery","change-profile:Saved":"Saved","lessons:Spring holidays":"Spring holidays","lessons:Summer holidays":"Summer holidays","lessons:Autumn holidays":"Autumn holidays","lessons:Winter holidays":"Winter holidays","lessons:holidays":"holidays","lessons:Learning":"Learning","lessons:Path":"Path","lessons:Next":"Next","lessons:Check":"Check","lessons:Try again":"Try again","lessons:Finish":"Finish","lessons:Congratulations":"Congratulations","lessons:On learning the holiday":"On learning the holiday","lessons:Reward":"Reward","lessons:Continue":"Continue","lessons:Start":"Start","home:Pick up where you left off":"Pick up where you left off","home:Continue":"Continue","home:Daily Reward":"Daily Reward","leaderboard:Current leaderboard":"Current leaderboard","leaderboard:Me":"Me"}'),wr=JSON.parse('{"Home":"\u041d\u0430\u0447\u0430\u043b\u043e","Lessons":"\u0423\u0440\u043e\u0446\u0438","Leaderboard":"\u041a\u043b\u0430\u0441\u0438\u0440\u0430\u043d\u0435","Profile":"\u041f\u0440\u043e\u0444\u0438\u043b","Edit Profile":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u0430","Spring Timeline":"\u041f\u0440\u043e\u043b\u0435\u0442\u043d\u0430 \u0432\u0440\u0435\u043c\u0435\u0432\u0430 \u043b\u0438\u043d\u0438\u044f","Summer Timeline":"\u041b\u044f\u0442\u043d\u0430 \u0432\u0440\u0435\u043c\u0435\u0432\u0430 \u043b\u0438\u043d\u0438\u044f","Autumn Timeline":"\u0415\u0441\u0435\u043d\u043d\u0430 \u0432\u0440\u0435\u043c\u0435\u0432\u0430 \u043b\u0438\u043d\u0438\u044f","Winter Timeline":"\u0417\u0438\u043c\u043d\u0430 \u0432\u0440\u0435\u043c\u0435\u0432\u0430 \u043b\u0438\u043d\u0438\u044f","My Collection":"\u041c\u043e\u044f\u0442\u0430 \u043a\u043e\u043b\u0435\u043a\u0446\u0438\u044f","auth:Sign Up":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f","auth:SignUp":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f","auth:Login":"\u0412\u0445\u043e\u0434","auth:Username":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435","auth:Email":"\u0418\u043c\u0435\u0439\u043b","auth:Password":"\u041f\u0430\u0440\u043e\u043b\u0430","auth:Confirm Password":"\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0435\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430","auth:username-trim":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e\u0442\u043e \u0438\u043c\u0435 \u043d\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043f\u043e\u0447\u0432\u0430 \u0438\u043b\u0438 \u0437\u0430\u0432\u044a\u0440\u0448\u0432\u0430 \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b","auth:username-min":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e\u0442\u043e \u0438\u043c\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0435 \u043f\u043e\u043d\u0435 {0} \u0441\u0438\u043c\u0432\u043e\u043b\u0430","auth:username-max":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e\u0442\u043e \u0438\u043c\u0435 \u043d\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u043f\u0440\u0435\u0432\u0438\u0448\u0430\u0432\u0430 {0} \u0441\u0438\u043c\u0432\u043e\u043b\u0430","auth:username-required":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e\u0442\u043e \u0438\u043c\u0435 \u0435 \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e","auth:username-exists":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e\u0442\u043e \u0438\u043c\u0435 \u0435 \u0437\u0430\u0435\u0442\u043e","auth:unknown-error":"\u0412\u044a\u0437\u043d\u0438\u043a\u043d\u0430 \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430 \u0433\u0440\u0435\u0448\u043a\u0430. \u041c\u043e\u043b\u044f, \u043e\u043f\u0438\u0442\u0430\u0439\u0442\u0435 \u043e\u0442\u043d\u043e\u0432\u043e.","auth:email-trim":"\u0418\u043c\u0435\u0439\u043b\u0430 \u043d\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043f\u043e\u0447\u0432\u0430 \u0438\u043b\u0438 \u0437\u0430\u0432\u044a\u0440\u0448\u0432\u0430 \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b","auth:email-email":"\u041f\u043e\u0441\u043e\u0447\u0435\u043d\u0438\u044f\u0442 \u0438\u043c\u0435\u0439\u043b \u043d\u0435 \u0435 \u0432\u0430\u043b\u0438\u0434\u0435\u043d","auth:email-required":"\u0418\u043c\u0435\u0439\u043b\u0430 \u0435 \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u0435\u043d","auth:password-trim":"\u041f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u043d\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043f\u043e\u0447\u0432\u0430 \u0438\u043b\u0438 \u0437\u0430\u0432\u044a\u0440\u0448\u0432\u0430 \u0441 \u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b","auth:password-min":"\u041f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0435 \u043f\u043e\u043d\u0435 {0} \u0441\u0438\u043c\u0432\u043e\u043b\u0430","auth:password-max":"\u041f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u043d\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u043f\u0440\u0435\u0432\u0438\u0448\u0430\u0432\u0430 {0} \u0441\u0438\u043c\u0432\u043e\u043b\u0430","auth:password-required":"\u041f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u0435 \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u0430","auth:password-confirm":"\u041f\u0430\u0440\u043e\u043b\u0438\u0442\u0435 \u043d\u0435 \u0441\u044a\u0432\u043f\u0430\u0434\u0430\u0442","auth:invalid-credentials":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435 \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u0430","auth:email-exists":"\u0418\u043c\u0435\u0439\u043b\u0430 \u0435 \u0438\u0437\u043f\u043e\u043b\u0437\u0432\u0430\u043d \u043e\u0442 \u0434\u0440\u0443\u0433 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b","auth:operation-not-allowed":"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u044f\u0442\u0430 \u043d\u0435 \u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u0435\u043d\u0430","auth:week-password":"\u0412\u044a\u0432\u0435\u0434\u0435\u043d\u0430\u0442\u0430 \u043f\u0430\u0440\u043e\u043b\u0430 \u0435 \u0441\u043b\u0430\u0431\u0430","profile:General":"\u041e\u0431\u0449\u0438","profile:Dark Mode":"\u0422\u044a\u043c\u0435\u043d \u0440\u0435\u0436\u0438\u043c","profile:My Rewards":"\u041c\u043e\u0438\u0442\u0435 \u043d\u0430\u0433\u0440\u0430\u0434\u0438","profile:Logout":"\u0418\u0437\u043b\u0435\u0437 \u043e\u0442 \u043f\u0440\u043e\u0444\u0438\u043b\u0430","profile:Language":"\u0415\u0437\u0438\u043a","profile:Select language":"\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u0435\u0437\u0438\u043a","profile:System":"\u0421\u0438\u0441\u0442\u0435\u043c\u0435\u043d","change-profile:Change picture":"\u0421\u043c\u0435\u043d\u0435\u0442\u0435 \u0441\u043d\u0438\u043c\u043a\u0430\u0442\u0430","change-profile:Username":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435","change-profile:Email":"\u0418\u043c\u0435\u0439\u043b","change-profile:Save":"\u0417\u0430\u043f\u0430\u0437\u0438","change-profile:username-min":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e\u0442\u043e \u0438\u043c\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0435 \u043f\u043e\u043d\u0435 {0} \u0441\u0438\u043c\u0432\u043e\u043b\u0430","change-profile:username-max":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e\u0442\u043e \u0438\u043c\u0435 \u043d\u0435 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u043f\u0440\u0435\u0432\u0438\u0448\u0430\u0432\u0430 {0} \u0441\u0438\u043c\u0432\u043e\u043b\u0430","change-profile:Choose from":"\u0418\u0437\u0431\u0435\u0440\u0438 \u043e\u0442","change-profile:Camera":"\u041a\u0430\u043c\u0435\u0440\u0430","change-profile:Gallery":"\u0413\u0430\u043b\u0435\u0440\u0438\u044f","change-profile:Saved":"\u0417\u0430\u043f\u0430\u0437\u0435\u043d\u043e","lessons:Spring holidays":"\u041f\u0440\u043e\u043b\u0435\u0442\u043d\u0438 \u043f\u0440\u0430\u0437\u043d\u0438\u0446\u0438","lessons:Summer holidays":"\u041b\u0435\u0442\u043d\u0438 \u043f\u0440\u0430\u0437\u043d\u0438\u0446\u0438","lessons:Autumn holidays":"\u0415\u0441\u0435\u043d\u043d\u0438 \u043f\u0440\u0430\u0437\u043d\u0438\u0446\u0438","lessons:Winter holidays":"\u0417\u0438\u043c\u043d\u0438 \u043f\u0440\u0430\u0437\u043d\u0438\u0446\u0438","lessons:holidays":"\u043f\u0440\u0430\u0437\u043d\u0438\u043a\u0430","lessons:Learning":"\u0423\u0447\u0435\u0431\u0435\u043d","lessons:Path":"\u043f\u043b\u0430\u043d","lessons:Next":"\u041d\u0430\u043f\u0440\u0435\u0434","lessons:Check":"\u041f\u0440\u043e\u0432\u0435\u0440\u0438","lessons:Try again":"\u041e\u043f\u0438\u0442\u0430\u0439 \u043e\u0442\u043d\u043e\u0432\u043e","lessons:Finish":"\u0417\u0430\u0432\u044a\u0440\u0448\u0438","lessons:Congratulations":"\u0427\u0435\u0441\u0442\u0438\u0442\u043e","lessons:On learning the holiday":"\u0422\u0438 \u043d\u0430\u0443\u0447\u0438 \u0437\u0430 \u043f\u0440\u0430\u0437\u043d\u0438\u043a\u0430","lessons:Reward":"\u041d\u0430\u0433\u0440\u0430\u0434\u0430","lessons:Continue":"\u041f\u0440\u043e\u0434\u044a\u043b\u0436\u0438","lessons:Start":"\u041d\u0430\u0447\u0430\u043b\u043e","home:Pick up where you left off":"\u041f\u0440\u043e\u0434\u044a\u043b\u0436\u0435\u0442\u0435 \u043e\u0442\u043a\u044a\u0434\u0435\u0442\u043e \u0441\u0442\u0435 \u0441\u043f\u0440\u0435\u043b\u0438","home:Continue":"\u0421\u043a\u0430\u0447\u0430\u0439","home:Daily Reward":"E\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u0430 \u043d\u0430\u0433\u0440\u0430\u0434\u0430","leaderboard:Current leaderboard":"\u041d\u0430\u0441\u0442\u043e\u044f\u0449\u043e \u043a\u043b\u0430\u0441\u0438\u0440\u0430\u043d\u0435","leaderboard:Me":"\u0410\u0437"}');var Sr=n(84589),Or=(0,u.createContext)();function Cr(){return(0,u.useContext)(Or)}function Pr(e){var t=e.children,n=(0,u.useState)("system"),o=(0,i.default)(n,2),l=o[0],s=o[1],c=(0,u.useState)(!1),d=(0,i.default)(c,2),f=d[0],p=d[1],h=(0,u.useRef)(!0);y().translations=r,y().fallbacks=!0,(0,u.useEffect)((function(){h.current?(h.current=!1,g()):x()}),[l]);var m=function(e){"system"===e&&(e=Sr.locale),y().locale=e,s(e)},g=function(){var e=(0,a.default)((function*(){try{var e=yield et.default.getItem("locale");null!==e&&m(e),p(!0)}catch(t){console.error(t)}}));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.default)((function*(){try{yield et.default.setItem("locale",l)}catch(e){console.error(e)}}));return function(){return e.apply(this,arguments)}}(),v={currentLocale:l,changeLocale:m,systemLocale:Sr.locale};return f?(0,b.jsx)(Or.Provider,{value:v,children:t}):null}function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tr=c.default.create({dialog:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({borderRadius:20},ye.default.select({web:{width:Z.default.get("window").width<640?"100%":"50%",alignSelf:"center"}})),listItem:{fontSize:18}});const Dr=function(e){var t=e.open,n=e.setOpen,r=e.onLanguageChange,a=Cr().systemLocale,i=function(){return n(!1)},o=function(e){return function(){r(e),i()}};return(0,b.jsx)(xr.default,{children:(0,b.jsxs)(vr.default,{style:Tr.dialog,visible:t,onDismiss:i,children:[(0,b.jsx)(vr.default.Title,{children:y().t("profile:Select language")}),(0,b.jsxs)(vr.default.Content,{children:[(0,b.jsx)(fr.default,{titleStyle:Tr.listItem,title:"\ud83c\udf10  "+y().t("profile:System")+" ("+a+")",onPress:o("system")}),(0,b.jsx)(fr.default,{titleStyle:Tr.listItem,title:"\ud83c\uddfa\ud83c\uddf8  English (en-US)",onPress:o("en-US")}),(0,b.jsx)(fr.default,{titleStyle:Tr.listItem,title:"\ud83c\udde7\ud83c\uddec  \u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 (bg-BG)",onPress:o("bg")})]})]})})};const zr=function(){var e=(0,u.useState)(!1),t=(0,i.default)(e,2),n=t[0],r=t[1],a={setLPickerOpen:r},o=Cr().changeLocale;return(0,b.jsxs)(l.default,{children:[(0,b.jsx)(Dr,{open:n,setOpen:r,onLanguageChange:function(e){return o(e)}}),(0,b.jsxs)(l.default,{style:Er.profileContainer,dataSet:{media:Rr.profileContainer},children:[(0,b.jsx)(sr,{}),(0,b.jsx)(yr,{listOptions:a})]})]})};var Lr=s.default.create({profileContainer:{padding:25,marginTop:20,"@media only screen and (min-width: 640px)":{width:"60%",alignSelf:"center"}}}),Er=Lr.styles,Rr=Lr.ids,Ir=n(34018),Br=n(44255),Hr=n(35372),Vr=n(92482);const Ur=function(e){var t=e.isOpen,n=e.setOpen,r=e.setImage,o=(0,f.useTheme)().colors,s=u.useRef(null),c=function(e){if(!e.canceled){var t=(0,i.default)(e.assets,1)[0];r(t.uri)}"web"!==ye.default.OS&&s.current.snapTo(2)},d=function(){var e=(0,a.default)((function*(){var e=yield Hr.launchCameraAsync({allowsEditing:!0,aspect:[1,1],quality:1});c(e)}));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.default)((function*(){var e=yield Hr.launchImageLibraryAsync({mediaTypes:Vr.MediaTypeOptions.Images,allowsEditing:!0,aspect:[1,1],quality:1});c(e)}));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){t&&"web"===ye.default.OS?(p(),m()):t&&s.current.snapTo(0)}),[t]);var m=function(){return n(!1)};return"web"===ye.default.OS?null:(0,b.jsx)(Br.default,{ref:s,snapPoints:[220,0,0],initialSnap:2,borderRadius:30,renderContent:function(){return(0,b.jsxs)(l.default,{style:[Ar.content,{backgroundColor:o.inverseOnSurface}],children:[(0,b.jsx)(l.default,{style:[Ar.bar,{backgroundColor:o.onSurface}]}),(0,b.jsxs)(l.default,{children:[(0,b.jsx)(h.default,{style:Ar.title,children:y().t("change-profile:Choose from")}),(0,b.jsxs)(l.default,{style:Ar.optionsContainer,children:[(0,b.jsx)(B.default,{onPress:d,style:Ar.rippleContainer,children:(0,b.jsxs)(l.default,{style:Ar.option,children:[(0,b.jsx)(jt.default,{name:"camera-alt",size:26,color:o.onSurface}),(0,b.jsx)(h.default,{style:Ar.optionText,children:y().t("change-profile:Camera")})]})}),(0,b.jsx)(dr.default,{style:Ar.divider}),(0,b.jsx)(B.default,{onPress:p,style:Ar.rippleContainer,children:(0,b.jsxs)(l.default,{style:Ar.option,children:[(0,b.jsx)(jt.default,{name:"photo",size:26,color:o.onSurface}),(0,b.jsx)(h.default,{style:Ar.optionText,children:y().t("change-profile:Gallery")})]})})]})]})]})},onCloseEnd:m})};var Ar=c.default.create({content:{padding:10,height:220},bar:{height:6,width:"20%",marginHorizontal:"40%",borderRadius:4},title:{fontSize:18,textAlign:"center",marginTop:15},optionsContainer:{marginHorizontal:25,marginTop:20},option:{flexDirection:"row",alignItems:"center"},optionText:{fontSize:18,marginLeft:10},rippleContainer:{paddingHorizontal:10,paddingVertical:8,borderRadius:10},divider:{marginVertical:5}});function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const _r=function(e){var t=e.children,n=e.style,r=e.fadeInDuration,a=e.pauseDuration,i=e.fadeoutDuration,o=e.visible,l=void 0!==o&&o,s=e.onAnimationEnd,c=(0,u.useRef)(new I.default.Value(0)).current,d="ios"===ye.default.OS||"android"===ye.default.OS;return(0,u.useEffect)((function(){l&&I.default.sequence([I.default.timing(c,{toValue:1,duration:r,useNativeDriver:d}),I.default.delay(a),I.default.timing(c,{toValue:0,duration:i,useNativeDriver:d})]).start((function(e){e.finished&&s()}))}),[l]),(0,b.jsx)(I.default.View,{style:Nr(Nr({},n),{},{opacity:c}),children:t})};const Wr=function(e){var t=e.text,n=void 0===t?"":t,r=e.fadeInDuration,a=void 0===r?500:r,i=e.fadeOutDuration,o=void 0===i?3e3:i,s=e.pauseDuration,u=void 0===s?2e3:s,c=e.visible,d=void 0!==c&&c,p=e.onAnimationEnd,m=(0,f.useTheme)().colors;return(0,b.jsx)(_r,{style:qr.container,fadeInDuration:a,fadeOutDuration:o,pauseDuration:u,visible:d,onAnimationEnd:p,children:(0,b.jsx)(l.default,{style:[qr.pill,{backgroundColor:m.inverseOnSurface,borderColor:m.primary}],children:(0,b.jsx)(h.default,{style:[qr.text,{color:m.primary}],children:n})})})};var qr=c.default.create({container:{justifyContent:"center",alignItems:"center"},pill:{borderRadius:40,paddingHorizontal:25,paddingVertical:8,marginVertical:10,borderWidth:1}});const Fr=function(){var e=(0,u.useState)(""),t=(0,i.default)(e,2),n=t[0],r=t[1],o=(0,u.useState)(null),s=(0,i.default)(o,2),c=s[0],d=s[1],p=(0,u.useState)(null),m=(0,i.default)(p,2),g=m[0],x=m[1],v=(0,u.useState)(!1),j=(0,i.default)(v,2),w=j[0],S=j[1],O=(0,u.useState)(!1),C=(0,i.default)(O,2),P=C[0],k=C[1],T=(0,f.useTheme)().colors,D=or(),z=D.username,L=D.email,E=D.avatar,R=D.updateProfile,I=D.saveAvatar;(0,u.useEffect)((function(){r(z)}),[z]);var B=function(){var e=(0,a.default)((function*(e){try{var t=yield ke(e),n=y().t("auth:username-exists");x(t?n:null)}catch(r){console.error(r)}}));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=(0,a.default)((function*(){var e=null;c&&(e=yield I(c)),(yield R({newUsername:n,newAvatar:e}))&&k(!0)}));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)(se.default,{onPress:le.default.dismiss,children:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(Ir.default,{style:Xr.container,behavior:"height",dataSet:{media:Jr.container},children:[(0,b.jsxs)(l.default,{style:Xr.profilePictureContainer,children:[(0,b.jsx)(J,{username:z,image:c||E,size:80,borderWidth:6,style:[Xr.avatar,{borderColor:T.onPrimary}]}),(0,b.jsx)(Mn,{mode:"contained",size:3,onPress:function(){return S(!0)},children:y().t("change-profile:Change picture")})]}),(0,b.jsxs)(l.default,{style:Xr.inputContainer,children:[(0,b.jsx)(h.default,{style:Xr.label,children:y().t("change-profile:Username")}),(0,b.jsx)(st,{style:{borderColor:T.primary},value:n,onChangeText:function(e){r(e)},onBlur:function(){if(n.length<4)x(y().t("change-profile:username-min").replace("{0}",4));else if(n.length>512)x(y().t("change-profile:username-max").replace("{0}",512));else{if(z===n)return void x(null);B(n)}},error:Boolean(g),helperText:g}),(0,b.jsx)(h.default,{style:Xr.label,children:y().t("change-profile:Email")}),(0,b.jsx)(st,{disabled:!0,style:{borderColor:T.primary},value:L})]}),(0,b.jsxs)(l.default,{style:Xr.saveContainer,children:[(0,b.jsx)(l.default,{children:(0,b.jsx)(Wr,{text:y().t("change-profile:Saved"),visible:P,onAnimationEnd:function(){return k(!1)}})}),(0,b.jsx)(Mn,{mode:"contained",disabled:Boolean(g),onPress:H,children:y().t("change-profile:Save")})]})]}),(0,b.jsx)(Ur,{isOpen:w,setOpen:S,setImage:d})]})})};var Gr=s.default.create({container:{padding:20,flex:1,"@media only screen and (min-width: 640px)":{width:"60%",alignSelf:"center"}},profilePictureContainer:{flexDirection:"row",marginHorizontal:20,marginTop:20},avatar:{marginRight:5},inputContainer:{marginTop:30,marginHorizontal:10},label:{paddingLeft:5,fontSize:16,marginTop:15},saveContainer:{flex:1,justifyContent:"flex-end",marginTop:100}}),Xr=Gr.styles,Jr=Gr.ids;const Qr=function(){return(0,b.jsx)(l.default,{children:(0,b.jsx)(h.default,{style:Yr.title,children:y().t("My Collection")})})};var Yr=c.default.create({title:{fontSize:28,fontWeight:"bold",marginBottom:20}});function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $r=function(e){var t=e.collected,n=void 0!==t&&t,r=e.name,a=e.thumbnail;return n?(0,b.jsxs)(vt.default,{style:ta.card,dataSet:{media:na.card},contentStyle:ta.contentContainer,elevation:2,children:[(0,b.jsx)(ue.default,{style:ta.image,borderTopLeftRadius:18,borderTopRightRadius:18,resizeMode:"cover",source:a?{uri:a}:S}),(0,b.jsx)(vt.default.Content,{style:ta.cardContent,children:(0,b.jsx)(h.default,{variant:"titleSmall",style:ta.rewardName,children:r})})]}):(0,b.jsx)(vt.default,{style:[ta.card,ta.cardUnknown],dataSet:{media:na.card},children:(0,b.jsx)(vt.default.Content,{style:ta.cardUnknownContent,children:(0,b.jsx)(h.default,{variant:"headlineMedium",children:"?"})})})};var ea=s.default.create({image:{flex:3,minHeight:100,borderTopLeftRadius:18,borderTopRightRadius:18},card:Zr(Zr({flex:1,marginVertical:10},ye.default.select({ios:{width:Z.default.get("window").width/2-55,minHeight:Z.default.get("window").width/2-55},android:{width:Z.default.get("window").width/2-55,minHeight:Z.default.get("window").width/2-55},web:{width:"12vw",minHeight:"12vw"}})),{},{"@media only screen and (max-width: 640px)":{width:"calc(50vw - 55px)",minHeight:"calc(50vw - 55px)"}}),cardUnknown:{flex:1,justifyContent:"space-around"},cardContent:{flex:1,paddingVertical:10,paddingHorizontal:16,justifyContent:"center"},rewardName:{textAlign:"center",flexWrap:"wrap"},cardUnknownContent:{aspectRatio:1,alignItems:"center",justifyContent:"center"},contentContainer:{flex:1}}),ta=ea.styles,na=ea.ids;const ra=function(e){var t=e.delay,n=void 0===t?0:t,r=e.children,a={transform:[{scale:(0,$.useSpring)({scale:1,delay:n,from:{scale:0},to:{scale:1},config:{mass:1,tension:200,friction:15}}).scale}]};return(0,b.jsx)($.animated.View,{style:a,children:r})};function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const sa=function(){var e=(0,u.useState)([]),t=(0,i.default)(e,2),n=t[0],r=t[1],o=function(){var e=(0,a.default)((function*(){try{var e=yield(n=C.currentUser.uid,P.collection("users").doc(n).get().then((function(e){return e.exists?e.data().collected_rewards:null}))),t=function(e,t){return e.map((function(e){return la(la({},e),{},{collected:t.includes(e.id)})}))}(yield P.collection("rewards").get().then((function(e){return e.docs.map((function(e){return ia(ia({},e.data()),{},{id:e.id})}))})),e);r(t)}catch(a){console.error(a)}var n}));return function(){return e.apply(this,arguments)}}();return(0,j.useFocusEffect)((0,u.useCallback)((function(){return o(),function(){r(null)}}),[])),(0,b.jsx)(W.default,{data:n,keyExtractor:function(e){return e.id},renderItem:function(e){var t=e.item,n=e.index;return(0,b.jsx)(ra,{delay:100*n,children:(0,b.jsx)($r,la({},t))})},ListHeaderComponent:function(){return(0,b.jsx)(Qr,{})},contentContainerStyle:ca.collectionContainer,columnWrapperStyle:{justifyContent:"space-evenly"},showsVerticalScrollIndicator:!1,showsHorizontalScrollIndicator:!1,style:ca.collection,dataSet:{media:da.collection},numColumns:"web"===ye.default.OS&&Z.default.get("window").width>640?6:2})};var ua=s.default.create({collection:{flex:1,"@media only screen and (min-width: 640px)":{paddingHorizontal:80}},collectionContainer:{padding:20}}),ca=ua.styles,da=ua.ids,fa=n(4947),pa=n(16647);const ha=function(e){var t=e.route;return(0,b.jsx)(pa.default.Header,{elevated:!0,mode:"center-aligned",children:(0,b.jsx)(pa.default.Content,{title:y().t(t.name)})})};var ma=(0,o.default)(),ga=ma.Navigator,ya=ma.Screen;function ba(){return(0,b.jsx)(ga,{initialRouteName:"Home",screenOptions:{headerMode:"screen",header:function(e){var t=e.route;return(0,b.jsx)(ha,{route:t})}},children:(0,b.jsx)(ya,{name:"Home",component:_})})}const xa=function(e){var t,n=e.route,r=(0,j.useNavigation)();return(0,b.jsxs)(pa.default.Header,{elevated:!0,children:[(0,b.jsx)(pa.default.BackAction,{onPress:r.goBack}),(0,b.jsx)(pa.default.Content,{title:y().t((null==(t=n.params)?void 0:t.appBarTitle)||n.name)})]})};var va=(0,o.default)(),ja=va.Navigator,wa=va.Screen;function Sa(){return(0,b.jsx)(Yt,{children:(0,b.jsxs)(ja,{initialRouteName:"Lessons",screenOptions:{headerMode:"screen",header:function(e){var t=e.route;return(0,b.jsx)(xa,{route:t})}},children:[(0,b.jsx)(wa,{name:"Lessons",component:Kt,options:{headerMode:"screen",header:function(e){var t=e.route;return(0,b.jsx)(ha,{route:t})}}}),(0,b.jsx)(wa,{name:"Season Timeline",component:fn}),(0,b.jsx)(wa,{name:"Lesson Screen",component:$n,options:{header:function(){return null}}})]})})}var Oa=(0,o.default)(),Ca=Oa.Navigator,Pa=Oa.Screen;function ka(){return(0,b.jsx)(Ca,{initialRouteName:"Leaderboard",screenOptions:{headerMode:"screen",header:function(e){var t=e.route;return(0,b.jsx)(ha,{route:t})}},children:(0,b.jsx)(Pa,{name:"Leaderboard",component:re})})}var Ta=(0,o.default)(),Da=Ta.Navigator,za=Ta.Screen;function La(){return(0,b.jsx)(lr,{children:(0,b.jsxs)(Da,{initialRouteName:"Profile",screenOptions:{headerMode:"screen",header:function(e){var t=e.route;return(0,b.jsx)(xa,{route:t})}},children:[(0,b.jsx)(za,{name:"Profile",component:zr,options:{headerMode:"screen",header:function(e){var t=e.route;return(0,b.jsx)(ha,{route:t})}}}),(0,b.jsx)(za,{name:"My Collection",component:sa}),(0,b.jsx)(za,{name:"Edit Profile",component:Fr})]})})}var Ea=(0,fa.default)(),Ra=Ea.Navigator,Ia=Ea.Screen;function Ba(){var e=function(e,t,n){return function(r){var a=r.focused,i=r.color;return(0,b.jsx)(Q.default,{name:a?t:n,size:e,color:i})}};return(0,b.jsxs)(Ra,{initialRouteName:"HomeStack",shifting:!0,sceneAnimationEnabled:!1,backBehavior:"firstRoute",compact:!0,children:[(0,b.jsx)(Ia,{name:"HomeStack",component:ba,options:{tabBarIcon:e(24,"home","home-outline"),title:y().t("Home")}}),(0,b.jsx)(Ia,{name:"LessonsStack",component:Sa,options:{tabBarIcon:e(24,"book","book-outline"),title:y().t("Lessons")}}),(0,b.jsx)(Ia,{name:"LeaderboardStack",component:ka,options:{tabBarIcon:e(24,"trophy","trophy-outline"),title:y().t("Leaderboard")}}),(0,b.jsx)(Ia,{name:"ProfileStack",component:La,options:{tabBarIcon:e(24,"person","person-outline"),title:y().t("Profile")}})]})}const Ha=function(){var e=(0,j.useNavigation)();return(0,b.jsxs)(pa.default.Header,{elevated:!0,children:[(0,b.jsx)(pa.default.BackAction,{onPress:function(){e.goBack()}}),(0,b.jsx)(pa.default.Content,{title:y().t("auth:Login")})]})};var Va=(0,o.default)(),Ua=Va.Navigator,Aa=Va.Screen;function Ma(){return(0,b.jsxs)(Ua,{initialRouteName:"Login",children:[(0,b.jsx)(Aa,{name:"SignUp",component:ht,options:{headerMode:"screen",header:function(){return(0,b.jsx)(Ha,{})}}}),(0,b.jsx)(Aa,{name:"Login",component:ct,options:{header:function(){return null}}}),(0,b.jsx)(Aa,{name:"BottomNavigation",component:Ba,options:{header:function(){return null}}})]})}var Na=n(92061),_a=n(35693),Wa=n(63292);function qa(e){var t=e.children,n=nt(),r=n.currentTheme,a=n.darkMode;return(0,b.jsx)(Na.default,{theme:r,children:(0,b.jsxs)(_a.default,{theme:r,children:[(0,b.jsx)(Wa.default,{style:a?"light":"dark"}),t]})})}var Fa=n(75629),Ga=n(88083);var Xa=n(39880);function Ja(){var e=(0,Ga.useFonts)({PacificoRegular:n(16061)}),t=(0,i.default)(e,1)[0],r=(0,u.useCallback)((0,a.default)((function*(){t&&(yield Xa.hideAsync())})),[t]);return t?(0,b.jsx)(l.default,{style:{flex:1},onLayout:r,children:(0,b.jsx)(rt,{children:(0,b.jsx)(qa,{children:(0,b.jsx)(Pr,{children:(0,b.jsx)(Ma,{})})})})}):null}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.substring(1)},Xa.preventAutoHideAsync(),(0,Fa.default)(Ja)},16061:(e,t,n)=>{e.exports=n.p+"static/media/PacificoRegular.c0d735fc04154e03a691.ttf"}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdO={},(()=>{var e=[];n.O=(t,r,a,i)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,a,i]=e[c],l=!0,s=0;s<r.length;s++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(l=!1,i<o&&(o=i));if(l){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,a,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(i,o),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/festify/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,[o,l,s]=r,u=0;if(o.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var c=s(n)}for(t&&t(r);u<o.length;u++)i=o[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[760],(()=>n(41393)));r=n.O(r)})();
//# sourceMappingURL=main.b3b738b8.js.map